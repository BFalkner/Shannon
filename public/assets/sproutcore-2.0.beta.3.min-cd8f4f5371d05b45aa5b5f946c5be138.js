// ==========================================================================
// Project:   SproutCore - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================
(function(a){var b={};window.Handlebars=b,b.VERSION="1.0.beta.2",b.helpers={},b.partials={},b.registerHelper=function(a,b,c){c&&(b.not=c),this.helpers[a]=b},b.registerPartial=function(a,b){this.partials[a]=b},b.registerHelper("helperMissing",function(a){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+a+"'")}),b.registerHelper("blockHelperMissing",function(a,b){var c=b.inverse||function(){},d=b.fn,e="",f=Object.prototype.toString.call(a);f==="[object Function]"&&(a=a());if(a===!0)return d(this);if(a===!1||a==null)return c(this);if(f==="[object Array]"){if(a.length>0)for(var g=0,h=a.length;g<h;g++)e=e+d(a[g]);else e=c(this);return e}return d(a)}),b.registerHelper("each",function(a,b){var c=b.fn,d=b.inverse,e="";if(a&&a.length>0)for(var f=0,g=a.length;f<g;f++)e=e+c(a[f]);else e=d(this);return e}),b.registerHelper("if",function(a,c){return!a||b.Utils.isEmpty(a)?c.inverse(this):c.fn(this)}),b.registerHelper("unless",function(a,c){var d=c.fn,e=c.inverse;return c.fn=e,c.inverse=d,b.helpers["if"].call(this,a,c)}),b.registerHelper("with",function(a,b){return b.fn(a)});var c=function(){var a={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,INTEGER:29,BOOLEAN:30,hashSegments:31,hashSegment:32,ID:33,EQUALS:34,pathSegments:35,SEP:36,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",29:"INTEGER",30:"BOOLEAN",33:"ID",34:"EQUALS",36:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[27,1],[27,1],[26,1],[31,2],[31,1],[32,3],[32,3],[32,3],[32,3],[21,1],[35,3],[35,1]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=new d.ProgramNode(f[h-2],f[h]);break;case 3:this.$=new d.ProgramNode(f[h]);break;case 4:this.$=new d.ProgramNode([]);break;case 5:this.$=[f[h]];break;case 6:f[h-1].push(f[h]),this.$=f[h-1];break;case 7:this.$=new d.InverseNode(f[h-2],f[h-1],f[h]);break;case 8:this.$=new d.BlockNode(f[h-2],f[h-1],f[h]);break;case 9:this.$=f[h];break;case 10:this.$=f[h];break;case 11:this.$=new d.ContentNode(f[h]);break;case 12:this.$=new d.CommentNode(f[h]);break;case 13:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1]);break;case 14:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1]);break;case 15:this.$=f[h-1];break;case 16:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1]);break;case 17:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1],!0);break;case 18:this.$=new d.PartialNode(f[h-1]);break;case 19:this.$=new d.PartialNode(f[h-2],f[h-1]);break;case 20:break;case 21:this.$=[[f[h-2]].concat(f[h-1]),f[h]];break;case 22:this.$=[[f[h-1]].concat(f[h]),null];break;case 23:this.$=[[f[h-1]],f[h]];break;case 24:this.$=[[f[h]],null];break;case 25:f[h-1].push(f[h]),this.$=f[h-1];break;case 26:this.$=[f[h]];break;case 27:this.$=f[h];break;case 28:this.$=new d.StringNode(f[h]);break;case 29:this.$=new d.IntegerNode(f[h]);break;case 30:this.$=new d.BooleanNode(f[h]);break;case 31:this.$=new d.HashNode(f[h]);break;case 32:f[h-1].push(f[h]),this.$=f[h-1];break;case 33:this.$=[f[h]];break;case 34:this.$=[f[h-2],f[h]];break;case 35:this.$=[f[h-2],new d.StringNode(f[h])];break;case 36:this.$=[f[h-2],new d.IntegerNode(f[h])];break;case 37:this.$=[f[h-2],new d.BooleanNode(f[h])];break;case 38:this.$=new d.IdNode(f[h]);break;case 39:f[h-2].push(f[h]),this.$=f[h-2];break;case 40:this.$=[f[h]]}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,33:[1,25],35:24},{17:26,21:23,33:[1,25],35:24},{17:27,21:23,33:[1,25],35:24},{17:28,21:23,33:[1,25],35:24},{21:29,33:[1,25],35:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,33:[1,25],35:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,38],28:[2,38],29:[2,38],30:[2,38],33:[2,38],36:[1,46]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],36:[2,40]},{18:[1,47]},{18:[1,48]},{18:[1,49]},{18:[1,50],21:51,33:[1,25],35:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:52,33:[1,25],35:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:53,27:54,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,23]},{18:[2,26],28:[2,26],29:[2,26],30:[2,26],33:[2,26]},{18:[2,31],32:55,33:[1,56]},{18:[2,27],28:[2,27],29:[2,27],30:[2,27],33:[2,27]},{18:[2,28],28:[2,28],29:[2,28],30:[2,28],33:[2,28]},{18:[2,29],28:[2,29],29:[2,29],30:[2,29],33:[2,29]},{18:[2,30],28:[2,30],29:[2,30],30:[2,30],33:[2,30]},{18:[2,33],33:[2,33]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],34:[1,57],36:[2,40]},{33:[1,58]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,59]},{18:[1,60]},{18:[2,21]},{18:[2,25],28:[2,25],29:[2,25],30:[2,25],33:[2,25]},{18:[2,32],33:[2,32]},{34:[1,57]},{21:61,28:[1,62],29:[1,63],30:[1,64],33:[1,25],35:24},{18:[2,39],28:[2,39],29:[2,39],30:[2,39],33:[2,39],36:[2,39]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,34],33:[2,34]},{18:[2,35],33:[2,35]},{18:[2,36],33:[2,36]},{18:[2,37],33:[2,37]}],defaultActions:{16:[2,1],37:[2,23],53:[2,21]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=d.lexer.lex()||1,typeof a!="number"&&(a=d.symbols_[a]||a),a}function c(a){e.length=e.length-2*a,f.length=f.length-a,g.length=g.length-a}var d=this,e=[0],f=[null],g=[],h=this.table,i="",j=0,k=0,l=0,m=2,n=1;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var o=this.lexer.yylloc;g.push(o),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var p,q,r,s,t,u,v={},w,x,y,z;for(;;){r=e[e.length-1],this.defaultActions[r]?s=this.defaultActions[r]:(p==null&&(p=b()),s=h[r]&&h[r][p]);if(typeof s=="undefined"||!s.length||!s[0]){if(!l){z=[];for(w in h[r])this.terminals_[w]&&w>2&&z.push("'"+this.terminals_[w]+"'");var A="";this.lexer.showPosition?A="Parse error on line "+(j+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+z.join(", "):A="Parse error on line "+(j+1)+": Unexpected "+(p==1?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(A,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:o,expected:z})}if(l==3){if(p==n)throw new Error(A||"Parsing halted.");k=this.lexer.yyleng,i=this.lexer.yytext,j=this.lexer.yylineno,o=this.lexer.yylloc,p=b()}for(;;){if(m.toString()in h[r])break;if(r==0)throw new Error(A||"Parsing halted.");c(1),r=e[e.length-1]}q=p,p=m,r=e[e.length-1],s=h[r]&&h[r][m],l=3}if(s[0]instanceof Array&&s.length>1)throw new Error("Parse Error: multiple actions possible at state: "+r+", token: "+p);switch(s[0]){case 1:e.push(p),f.push(this.lexer.yytext),g.push(this.lexer.yylloc),e.push(s[1]),p=null,q?(p=q,q=null):(k=this.lexer.yyleng,i=this.lexer.yytext,j=this.lexer.yylineno,o=this.lexer.yylloc,l>0&&l--);break;case 2:x=this.productions_[s[1]][1],v.$=f[f.length-x],v._$={first_line:g[g.length-(x||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(x||1)].first_column,last_column:g[g.length-1].last_column},u=this.performAction.call(v,i,k,j,this.yy,s[1],f,g);if(typeof u!="undefined")return u;x&&(e=e.slice(0,-1*x*2),f=f.slice(0,-1*x),g=g.slice(0,-1*x)),e.push(this.productions_[s[1]][0]),f.push(v.$),g.push(v._$),y=h[e[e.length-2]][e[e.length-1]],e.push(y);break;case 3:return!0}}return!0}},b=function(){var a={EOF:1,parseError:function(a,b){if(this.yy.parseError)this.yy.parseError(a,b);else throw new Error(a)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.match+=a,this.matched+=a;var b=a.match(/\n/);return b&&this.yylineno++,this._input=this._input.slice(1),a},unput:function(a){return this._input=a+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d;this._more||(this.yytext="",this.match="");var e=this._currentRules();for(var f=0;f<e.length;f++){b=this._input.match(this.rules[e[f]]);if(b){d=b[0].match(/\n.*/g),d&&(this.yylineno+=d.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:d?d[d.length-1].length-1:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,e[f],this.conditionStack[this.conditionStack.length-1]);if(a)return a;return}}if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return typeof a!="undefined"?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}};return a.performAction=function(a,b,c,d){var e=d;switch(c){case 0:this.begin("mu");if(b.yytext)return 14;break;case 1:return 14;case 2:return 24;case 3:return 16;case 4:return 20;case 5:return 19;case 6:return 19;case 7:return 23;case 8:return 23;case 9:return b.yytext=b.yytext.substr(3,b.yyleng-5),this.begin("INITIAL"),15;case 10:return 22;case 11:return 34;case 12:return 33;case 13:return 33;case 14:return 36;case 15:break;case 16:return this.begin("INITIAL"),18;case 17:return this.begin("INITIAL"),18;case 18:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\"/g,'"'),28;case 19:return 30;case 20:return 30;case 21:return 29;case 22:return 33;case 23:return"INVALID";case 24:return 5}},a.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^true(?=[}\s])/,/^false(?=[}\s])/,/^[0-9]+(?=[}\s])/,/^[a-zA-Z0-9_$-]+(?=[=}\s/.])/,/^./,/^$/],a.conditions={mu:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],inclusive:!1},INITIAL:{rules:[0,1,24],inclusive:!0}},a}();return a.lexer=b,a}();typeof require!="undefined"&&typeof a!="undefined"&&(a.parser=c,a.parse=function(){return c.parse.apply(c,arguments)},a.main=function(b){if(!b[1])throw new Error("Usage: "+b[0]+" FILE");if(typeof process!="undefined")var c=require("fs").readFileSync(require("path").join(process.cwd(),b[1]),"utf8");else var d=require("file").path(require("file").cwd()),c=d.join(b[1]).read({charset:"utf-8"});return a.parser.parse(c)},typeof module!="undefined"&&require.main===module&&a.main(typeof process!="undefined"?process.argv.slice(1):require("system").args)),b.Parser=c,b.parse=function(a){return b.Parser.yy=b.AST,b.Parser.parse(a)},b.print=function(a){return(new b.PrintVisitor).accept(a)},b.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){}},b.log=function(a,c){b.logger.log(a,c)},function(){b.AST={},b.AST.ProgramNode=function(a,c){this.type="program",this.statements=a,c&&(this.inverse=new b.AST.ProgramNode(c))},b.AST.MustacheNode=function(a,b,c){this.type="mustache",this.id=a[0],this.params=a.slice(1),this.hash=b,this.escaped=!c},b.AST.PartialNode=function(a,b){this.type="partial",this.id=a,this.context=b};var a=function(a,c){if(a.original!==c.original)throw new b.Exception(a.original+" doesn't match "+c.original)};b.AST.BlockNode=function(b,c,d){a(b.id,d),this.type="block",this.mustache=b,this.program=c},b.AST.InverseNode=function(b,c,d){a(b.id,d),this.type="inverse",this.mustache=b,this.program=c},b.AST.ContentNode=function(a){this.type="content",this.string=a},b.AST.HashNode=function(a){this.type="hash",this.pairs=a},b.AST.IdNode=function(a){this.type="ID",this.original=a.join(".");var b=[],c=0;for(var d=0,e=a.length;d<e;d++){var f=a[d];f===".."?c++:f==="."||f==="this"?this.isScoped=!0:b.push(f)}this.parts=b,this.string=b.join("."),this.depth=c,this.isSimple=b.length===1&&c===0},b.AST.StringNode=function(a){this.type="STRING",this.string=a},b.AST.IntegerNode=function(a){this.type="INTEGER",this.integer=a},b.AST.BooleanNode=function(a){this.type="BOOLEAN",this.bool=a},b.AST.CommentNode=function(a){this.type="comment",this.comment=a}}(),b.Exception=function(a){var b=Error.prototype.constructor.apply(this,arguments);for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c])},b.Exception.prototype=new Error,b.SafeString=function(a){this.string=a},b.SafeString.prototype.toString=function(){return this.string.toString()},function(){var a={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/&(?!\w+;)|[<>"'`]/g,d=/[&<>"'`]/,e=function(b){return a[b]||"&amp;"};b.Utils={escapeExpression:function(a){return a instanceof b.SafeString?a.toString():a==null||a===!1?"":d.test(a)?a.replace(c,e):a},isEmpty:function(a){return typeof a=="undefined"?!0:a===null?!0:a===!1?!0:Object.prototype.toString.call(a)==="[object Array]"&&a.length===0?!0:!1}}}(),b.Compiler=function(){},b.JavaScriptCompiler=function(){},function(a,c){a.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,assignToHash:15,pushStringParam:16},a.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:2,lookup:1,invokeMustache:3,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:3,invokePartial:1,push:1,assignToHash:1,pushStringParam:1},a.DISASSEMBLE_MAP={};for(var d in a.OPCODE_MAP){var e=a.OPCODE_MAP[d];a.DISASSEMBLE_MAP[e]=d}a.multiParamSize=function(b){return a.MULTI_PARAM_OPCODES[a.DISASSEMBLE_MAP[b]]},a.prototype={compiler:a,disassemble:function(){var b=this.opcodes,c,d,e=[],f,g,h;for(var i=0,j=b.length;i<j;i++){c=b[i];if(c==="DECLARE")g=b[++i],h=b[++i],e.push("DECLARE "+g+" = "+h);else{f=a.DISASSEMBLE_MAP[c];var k=a.multiParamSize(c),l=[];for(var m=0;m<k;m++)d=b[++i],typeof d=="string"&&(d='"'+d.replace("\n","\\n")+'"'),l.push(d);f=f+" "+l.join(" "),e.push(f)}}return e.join("\n")},guid:0,compile:function(a,b){this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0};if(c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.program(a)},accept:function(a){return this[a.type](a)},program:function(a){var b=a.statements,c;this.opcodes=[];for(var d=0,e=b.length;d<e;d++)c=b[d],this[c.type](c);return this.isSimple=e===1,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b=(new this.compiler).compile(a,this.options),c=this.guid++;this.usePartial=this.usePartial||b.usePartial,this.children[c]=b;for(var d=0,e=b.depths.list.length;d<e;d++){depth=b.depths.list[d];if(depth<2)continue;this.addDepth(depth-1)}return c},block:function(a){var b=a.mustache,c,d,e,f,g=this.setupStackForMustache(b),h=this.compileProgram(a.program);a.program.inverse&&(f=this.compileProgram(a.program.inverse),this.declare("inverse",f)),this.opcode("invokeProgram",h,g.length,!!b.hash),this.declare("inverse",null),this.opcode("append")},inverse:function(a){var b=this.setupStackForMustache(a.mustache),c=this.compileProgram(a.program);this.declare("inverse",c),this.opcode("invokeProgram",null,b.length,!!a.mustache.hash),this.opcode("append")},hash:function(a){var b=a.pairs,c,d;this.opcode("push","{}");for(var e=0,f=b.length;e<f;e++)c=b[e],d=c[1],this.accept(d),this.opcode("assignToHash",c[0])},partial:function(a){var b=a.id;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","depth0"),this.opcode("invokePartial",b.original),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){var b=this.setupStackForMustache(a);this.opcode("invokeMustache",b.length,a.id.original,!!a.hash),a.escaped?this.opcode("appendEscaped"):this.opcode("append")},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth),this.opcode("lookupWithHelpers",a.parts[0]||null,a.isScoped||!1);for(var b=1,c=a.parts.length;b<c;b++)this.opcode("lookup",a.parts[b])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("push",a.integer)},BOOLEAN:function(a){this.opcode("push",a.bool)},comment:function(){},pushParams:function(a){var b=a.length,c;while(b--)c=a[b],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.string)):this[c.type](c)},opcode:function(b,c,d,e){this.opcodes.push(a.OPCODE_MAP[b]),c!==undefined&&this.opcodes.push(c),d!==undefined&&this.opcodes.push(d),e!==undefined&&this.opcodes.push(e)},declare:function(a,b){this.opcodes.push("DECLARE"),this.opcodes.push(a),this.opcodes.push(b)},addDepth:function(a){a!==0&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},setupStackForMustache:function(a){var b=a.params;return this.pushParams(b),a.hash&&this.hash(a.hash),this.ID(a.id),b}},c.prototype={nameLookup:function(a,b,d){return c.RESERVED_WORDS[b]||b.indexOf("-")!==-1||!isNaN(b)?a+"['"+b+"']":/^[0-9]+$/.test(b)?a+"["+b+"]":a+"."+b},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":"buffer += "+a+";"},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b,c,d){this.environment=a,this.options=b||{},this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],aliases:{self:"this"},registers:{list:[]}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.compileChildren(a,b);var e=a.opcodes,f;this.i=0;for(h=e.length;this.i<h;this.i++)f=this.nextOpcode(0),f[0]==="DECLARE"?(this.i=this.i+2,this[f[1]]=f[2]):(this.i=this.i+f[1].length,this[f[0]].apply(this,f[1]));return this.createFunctionContext(d)},nextOpcode:function(b){var c=this.environment.opcodes,d=c[this.i+b],e,f,g,h;if(d==="DECLARE")return e=c[this.i+1],f=c[this.i+2],["DECLARE",e,f];e=a.DISASSEMBLE_MAP[d],g=a.multiParamSize(d),h=[];for(var i=0;i<g;i++)h.push(c[this.i+i+1+b]);return[e,h]},eat:function(a){this.i=this.i+a.length},preamble:function(){var a=[];if(!this.isChild){var b="helpers = helpers || Handlebars.helpers;";this.environment.usePartial&&(b=b+" partials = partials || Handlebars.partials;"),a.push(b)}else a.push("");this.environment.isSimple?a.push(""):a.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(a){var c=this.stackVars;this.isChild||(c=c.concat(this.context.registers.list)),c.length>0&&(this.source[1]=this.source[1]+", "+c.join(", "));if(!this.isChild){var d=[];for(var e in this.context.aliases)this.source[1]=this.source[1]+", "+e+"="+this.context.aliases[e]}this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var f=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var g=0,h=this.environment.depths.list.length;g<h;g++)f.push("depth"+this.environment.depths.list[g]);f.length===4&&!this.environment.usePartial&&f.pop();if(a)return f.push(this.source.join("\n  ")),Function.apply(this,f);var i="function "+(this.name||"")+"("+f.join(",")+") {\n  "+this.source.join("\n  ")+"}";return b.log(b.logger.DEBUG,i+"\n\n"),i},appendContent:function(a){this.source.push(this.appendToBuffer(this.quotedString(a)))},append:function(){var a=this.popStack();this.source.push("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){var a=this.nextOpcode(1),b="";this.context.aliases.escapeExpression="this.escapeExpression",a[0]==="appendContent"&&(b=" + "+this.quotedString(a[1][0]),this.eat(a)),this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+b))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupWithHelpers:function(a,b){if(a){var c=this.nextStack();this.usingKnownHelper=!1;var d;!b&&this.options.knownHelpers[a]?(d=c+" = "+this.nameLookup("helpers",a,"helper"),this.usingKnownHelper=!0):b||this.options.knownHelpersOnly?d=c+" = "+this.nameLookup("depth"+this.lastContext,a,"context"):d=c+" = "+this.nameLookup("helpers",a,"helper")+" || "+this.nameLookup("depth"+this.lastContext,a,"context"),this.source.push(d)}else this.pushStack("depth"+this.lastContext)},lookup:function(a){var b=this.topStack();this.source.push(b+" = "+this.nameLookup(b,a,"context")+";")},pushStringParam:function(a){this.pushStack("depth"+this.lastContext),this.pushString(a)},pushString:function(a){this.pushStack(this.quotedString(a))},push:function(a){this.pushStack(a)},invokeMustache:function(a,b,c){this.populateParams(a,this.quotedString(b),"{}",null,c,function(a,b,c){this.usingKnownHelper||(this.context.aliases.helperMissing="helpers.helperMissing",this.context.aliases.undef="void 0",this.source.push("else if("+c+"=== undef) { "+a+" = helperMissing.call("+b+"); }"),a!==c&&this.source.push("else { "+a+" = "+c+"; }"))})},invokeProgram:function(a,b,c){var d=this.programExpression(this.inverse),e=this.programExpression(a);this.populateParams(b,null,e,d,c,function(a,b,c){this.usingKnownHelper||(this.context.aliases.blockHelperMissing="helpers.blockHelperMissing",this.source.push("else { "+a+" = blockHelperMissing.call("+b+"); }"))})},populateParams:function(a,b,c,d,e,f){var g=e||this.options.stringParams||d||this.options.data,h=this.popStack(),i,j=[],k,l,m;g?(this.register("tmp1",c),m="tmp1"):m="{ hash: {} }";if(g){var n=e?this.popStack():"{}";this.source.push("tmp1.hash = "+n+";")}this.options.stringParams&&this.source.push("tmp1.contexts = [];");for(var o=0;o<a;o++)k=this.popStack(),j.push(k),this.options.stringParams&&this.source.push("tmp1.contexts.push("+this.popStack()+");");d&&(this.source.push("tmp1.fn = tmp1;"),this.source.push("tmp1.inverse = "+d+";")),this.options.data&&this.source.push("tmp1.data = data;"),j.push(m),this.populateCall(j,h,b||h,f)},populateCall:function(a,b,c,d){var e=["depth0"].concat(a).join(", "),f=["depth0"].concat(c).concat(a).join(", "),g=this.nextStack();this.usingKnownHelper?this.source.push(g+" = "+b+".call("+e+");"):(this.context.aliases.functionType='"function"',this.source.push("if(typeof "+b+" === functionType) { "+g+" = "+b+".call("+e+"); }")),d.call(this,g,f,b),this.usingKnownHelper=!1},invokePartial:function(a){this.pushStack("self.invokePartial("+this.nameLookup("partials",a,"partial")+", '"+a+"', "+this.popStack()+", helpers, partials);")},assignToHash:function(a){var b=this.popStack(),c=this.topStack();this.source.push(c+"['"+a+"'] = "+b+";")},compiler:c,compileChildren:function(a,b){var c=a.children,d,e;for(var f=0,g=c.length;f<g;f++){d=c[f],e=new this.compiler,this.context.programs.push("");var h=this.context.programs.length;d.index=h,d.name="program"+h,this.context.programs[h]=e.compile(d,b,this.context)}},programExpression:function(a){if(a==null)return"self.noop";var b=this.environment.children[a],c=b.depths.list,d=[b.index,b.name,"data"];for(var e=0,f=c.length;e<f;e++)depth=c[e],depth===1?d.push("depth0"):d.push("depth"+(depth-1));return c.length===0?"self.program("+d.join(", ")+")":(d.shift(),"self.programWithDepth("+d.join(", ")+")")},register:function(a,b){this.useRegister(a),this.source.push(a+" = "+b+";")},useRegister:function(a){this.context.registers[a]||(this.context.registers[a]=!0,this.context.registers.list.push(a))},pushStack:function(a){return this.source.push(this.nextStack()+" = "+a+";"),"stack"+this.stackSlot},nextStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};var f="break case catch continue default delete do else finally for function if in instanceof new return switch this throw try typeof var void while with null true false".split(" ");compilerWords=c.RESERVED_WORDS={};for(var g=0,h=f.length;g<h;g++)compilerWords[f[g]]=!0}(b.Compiler,b.JavaScriptCompiler),b.precompile=function(a,c){c=c||{};var d=b.parse(a),e=(new b.Compiler).compile(d,c);return(new b.JavaScriptCompiler).compile(e,c)},b.compile=function(a,c){c=c||{};var d=b.parse(a),e=(new b.Compiler).compile(d,c),f=(new b.JavaScriptCompiler).compile(e,c,undefined,!0);return b.template(f)},b.VM={template:function(a){var c={escapeExpression:b.Utils.escapeExpression,invokePartial:b.VM.invokePartial,programs:[],program:function(a,c,d){var e=this.programs[a];return d?b.VM.program(c,d):e?e:(e=this.programs[a]=b.VM.program(c),e)},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop};return function(d,e){return e=e||{},a.call(c,b,d,e.helpers,e.partials,e.data)}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,2);return function(c,e){return e=e||{},a.apply(this,[c,e.data||b].concat(d))}},program:function(a,b){return function(c,d){return d=d||{},a(c,d.data||b)}},noop:function(){return""},invokePartial:function(a,c,d,e,f){if(a===undefined)throw new b.Exception("The partial "+c+" could not be found");if(a instanceof Function)return a(d,{helpers:e,partials:f});if(!b.compile)throw new b.Exception("The partial "+c+" could not be compiled when running in vm mode");return f[c]=b.compile(a),f[c](d,{helpers:e,partials:f})}},b.template=b.VM.template})({}),function(a){"undefined"==typeof SC&&(SC={},"undefined"!=typeof window&&(window.SC=window.SproutCore=SproutCore=SC)),SC.VERSION="2.0.alpha",SC.ENV="undefined"==typeof ENV?{}:ENV,SC.K=function(){return this},window.sc_assert=function(a,b){"function"==typeof b&&(b=b()!==!1);if(!b)throw new Error("assertion failed: "+a)},"undefined"==typeof require&&(require=SC.K)}({}),function(a){var b=SC.platform={};b.create=Object.create;if(!b.create){var c=function(){},d=c.prototype;b.create=function(a,e){c.prototype=a,a=new c,c.prototype=d;if(e!==undefined)for(var f in e){if(!e.hasOwnProperty(f))continue;b.defineProperty(a,f,e[f])}return a},b.create.isSimulated=!0}var e=Object.defineProperty,f,g;if(e)try{e({},"a",{get:function(){}})}catch(h){e=null}e&&(f=function(){var a={};return e(a,"a",{configurable:!0,enumerable:!0,get:function(){},set:function(){}}),e(a,"a",{configurable:!0,enumerable:!0,writable:!0,value:!0}),a.a===!0}(),g=function(){try{return e(document.body,"definePropertyOnDOM",{}),!0}catch(a){}return!1}(),f?g||(e=function(a,b,c){var d;return typeof Node=="object"?d=a instanceof Node:d=typeof a=="object"&&typeof a.nodeType=="number"&&typeof a.nodeName=="string",d?a[b]=c.value:Object.defineProperty(a,b,c)}):e=null),b.defineProperty=e,b.hasPropertyAccessors=!0,b.defineProperty||(b.hasPropertyAccessors=!1,b.defineProperty=function(a,b,c){a[b]=c.value},b.defineProperty.isSimulated=!0)}({}),function(a){var b="__sc"+ +(new Date),c,d,e;c=0,d=[],e={};var f={configurable:!0,writable:!0,enumerable:!1},g=SC.platform.defineProperty,h=SC.platform.create;SC.GUID_KEY=b,SC.generateGuid=function(a,d){d||(d="sc");var e=d+c++;return a&&(f.value=e,g(a,b,f),f.value=null),e},SC.guidFor=function(a){if(a===undefined)return"(undefined)";if(a===null)return"(null)";var f,g,h=typeof a;switch(h){case"number":return g=d[a],g||(g=d[a]="nu"+a),g;case"string":return g=e[a],g||(g=e[a]="st"+c++),g;case"boolean":return a?"(true)":"(false)";default:if(a[b])return a[b];if(a===Object)return"(Object)";if(a===Array)return"(Array)";return SC.generateGuid(a,"sc")}};var i={writable:!0,configurable:!1,enumerable:!1,value:null},j=SC.GUID_KEY+"_meta";SC.META_KEY=j;var k={descs:{},watching:{}};Object.freeze&&Object.freeze(k),SC.meta=function(a,b){var c=a[j];return b===!1?c||k:(c?c.source!==a&&(c=a[j]=h(c),c.descs=h(c.descs),c.values=h(c.values),c.watching=h(c.watching),c.lastSetValues={},c.cache={},c.source=a):(g(a,j,i),c=a[j]={descs:{},watching:{},values:{},lastSetValues:{},cache:{},source:a},c.descs.constructor=null),c)},SC.metaPath=function(a,b,c){var d=SC.meta(a,c),e,f;for(var g=0,i=b.length;g<i;g++){e=b[g],f=d[e];if(!f){if(!c)return undefined;f=d[e]={__sc_source__:a}}else if(f.__sc_source__!==a){if(!c)return undefined;f=d[e]=h(f),f.__sc_source__=a}d=f}return f},SC.wrap=function(a,b){function c(){}var d=function(){var d,e=this._super;return this._super=b||c,d=a.apply(this,arguments),this._super=e,d};return d.base=a,d},SC.isArray=function(a){return!a||a.setInterval?!1:Array.isArray&&Array.isArray(a)?!0:SC.Array&&SC.Array.detect(a)?!0:a.length!==undefined&&"object"==typeof a?!0:!1},SC.makeArray=function(a){return a==null?[]:SC.isArray(a)?a:[a]}}({}),function(a){function b(a,b){var e=o.test(b),f=!e&&m.test(b),i;if(!a||f)a=window;e&&(b=b.slice(5));var j=b.indexOf("*");j>0&&b.charAt(j-1)!=="."?(a&&g(a,!1).proto!==a?a=d(a,b.slice(0,j)):a=null,b=b.slice(j+1)):a===window&&(i=c(b),a=h(a,i),b=b.slice(i.length+1));if(!b||b.length===0)throw new Error("Invalid Path");return l[0]=a,l[1]=b,l}function c(a){return a.match(p)[0]}function d(a,b){var c=b.length,e,f,g;e=b.indexOf("*");if(e>0&&b[e-1]!==".")return d(d(a,b.slice(0,e)),b.slice(e+1));e=0;while(a&&e<c){f=b.indexOf(".",e),f<0&&(f=c),g=b.slice(e,f),a=g==="*"?a:h(a,g);if(a&&a.isDestroyed)return undefined;e=f+1}return a}function e(a){if(a==="*")return a;var b=
a.charAt(0);return b==="."?"this"+a:b==="*"&&a.charAt(1)!=="."?"this."+a.slice(1):a}var f=SC.platform.hasPropertyAccessors&&SC.ENV.USE_ACCESSORS;SC.USE_ACCESSORS=!!f;var g=SC.meta,h,i;h=function(a,b){b===undefined&&"string"==typeof a&&(b=a,a=SC);if(!a)return undefined;var c=a[b];return c===undefined&&"function"==typeof a.unknownProperty&&(c=a.unknownProperty(b)),c},i=function(a,b,c){return"object"!=typeof a||b in a?a[b]=c:"function"==typeof a.setUnknownProperty?a.setUnknownProperty(b,c):"function"==typeof a.unknownProperty?a.unknownProperty(b,c):a[b]=c,c};if(!f){var j=h,k=i;h=function(a,b){b===undefined&&"string"==typeof a&&(b=a,a=SC);if(!a)return undefined;var c=g(a,!1).descs[b];return c?c.get(a,b):j(a,b)},i=function(a,b,c){var d=g(a,!1).descs[b];return d?d.set(a,b,c):k(a,b,c),c}}SC.get=h,SC.set=i;var l=[],m=/^([A-Z$]|([0-9][A-Z$])).*[\.\*]/,n=/^([A-Z$]|([0-9][A-Z$])).*[\.\*]?/,o=/^this[\.\*]/,p=/^([^\.\*]+)/;SC.normalizePath=e,SC.normalizeTuple=function(a,c){return b(a,e(c))},SC.normalizeTuple.primitive=b,SC.getPath=function(a,c){var f,g,i;!c&&"string"==typeof a&&(c=a,a=null),g=c.indexOf("*")>-1;if(a===null&&!g&&c.indexOf(".")<0)return h(window,c);c=e(c),f=o.test(c),i=!f&&m.test(c);if(!a||f||i||g){var j=b(a,c);a=j[0],c=j[1]}return d(a,c)},SC.setPath=function(a,c,d,f){var g;arguments.length===2&&"string"==typeof a&&(d=c,c=a,a=null),c=e(c);if(c.indexOf("*")>0){var h=b(a,c);a=h[0],c=h[1]}if(c.indexOf(".")>0)g=c.slice(c.lastIndexOf(".")+1),c=c.slice(0,c.length-(g.length+1)),!o.test(c)&&n.test(c)&&c.indexOf(".")<0?a=window[c]:c!=="this"&&(a=SC.getPath(a,c));else{if(n.test(c))throw new Error("Invalid Path");g=c}if(!g||g.length===0||g==="*")throw new Error("Invalid Path");if(!a){if(f)return;throw new Error("Object in path "+c+" could not be found or was destroyed.")}return SC.set(a,g,d)},SC.trySetPath=function(a,b,c){return arguments.length===2&&"string"==typeof a&&(c=b,b=a,a=null),SC.setPath(a,b,c,!0)},SC.isGlobalPath=function(a){return!o.test(a)&&m.test(a)}}({}),function(a){Array.prototype.map||(Array.prototype.map=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;var d=Array(c),e=arguments[1];for(var f=0;f<c;f++)f in b&&(d[f]=a.call(e,b[f],f,b));return d}),Array.prototype.forEach||(Array.prototype.forEach=function(a){"use strict";if(this===void 0||this===null)throw new TypeError;var b=Object(this),c=b.length>>>0;if(typeof a!="function")throw new TypeError;var d=arguments[1];for(var e=0;e<c;e++)e in b&&a.call(d,b[e],e,b)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b==null?b=0:b<0&&(b=Math.max(0,this.length+b));for(var c=b,d=this.length;c<d;c++)if(this[c]===a)return c;return-1})}({}),function(a){function b(a,b){return b==="toString"?"function"!=typeof a.toString:!!a[b]}function c(a){var b=u[a];return b||(b=u[a]=function(b){return e(this,a,b)}),b}function d(a){var b=t[a];return b||(b=t[a]=function(){return f(this,a)}),b}function e(a,b,c){var d=j(a),e;return e=d.watching[b]>0&&c!==d.values[b],e&&SC.propertyWillChange(a,b),d.values[b]=c,e&&SC.propertyDidChange(a,b),c}function f(a,b,c){c=c||j(a,!1).values;if(c){var d=c[b];if(d!==undefined)return d;if(a.unknownProperty)return a.unknownProperty(b)}}var g=SC.USE_ACCESSORS,h=SC.GUID_KEY,i=SC.META_KEY,j=SC.meta,k=SC.platform.create,l=SC.platform.defineProperty,m,n,o={writable:!0,configurable:!0,enumerable:!0,value:null},p=SC.Descriptor=function(){},q=p.setup=function(a,b,c){o.value=c,l(a,b,o),o.value=null},r=SC.Descriptor.prototype;r.set=function(a,b,c){return a[b]=c,c},r.get=function(a,b){return f(a,b,a)},r.setup=q,r.teardown=function(a,b){return a[b]},r.val=function(a,b){return a[b]},g||(SC.Descriptor.MUST_USE_GETTER=function(){},SC.Descriptor.MUST_USE_SETTER=function(){!this.isDestroyed});var s={configurable:!0,enumerable:!0,set:SC.Descriptor.MUST_USE_SETTER},t={},u={};n=new SC.Descriptor,SC.platform.hasPropertyAccessors?(n.get=f,n.set=e,g?n.setup=function(a,b,e){s.get=d(b),s.set=c(b),l(a,b,s),s.get=s.set=null,e!==undefined&&(j(a).values[b]=e)}:n.setup=function(a,b,c){s.get=d(b),l(a,b,s),s.get=null,c!==undefined&&(j(a).values[b]=c)},n.teardown=function(a,b){var c=j(a).values[b];return delete j(a).values[b],c}):n.set=function(a,b,c){var d=j(a),e;return e=d.watching[b]>0&&c!==a[b],e&&SC.propertyWillChange(a,b),a[b]=c,e&&SC.propertyDidChange(a,b),c},SC.SIMPLE_PROPERTY=new SC.Descriptor,m=SC.SIMPLE_PROPERTY,m.unwatched=n.unwatched=m,m.watched=n.watched=n,SC.defineProperty=function(a,c,d,e){var f=j(a,!1),g=f.descs,h=f.watching[c]>0;return e===undefined?e=b(g,c)?g[c].teardown(a,c):a[c]:b(g,c)&&g[c].teardown(a,c),d||(d=m),d instanceof SC.Descriptor?(f=j(a,!0),g=f.descs,d=(h?d.watched:d.unwatched)||d,g[c]=d,d.setup(a,c,e,h)):(g[c]&&(j(a).descs[c]=null),l(a,c,d)),this},SC.create=function(a,b){var c=k(a,b);return h in c&&SC.generateGuid(c,"sc"),i in c&&SC.rewatch(c),c},SC.createPrototype=function(a,b){var c=k(a,b);return j(c,!0).proto=c,h in c&&SC.generateGuid(c,"sc"),i in c&&SC.rewatch(c),c},SC.destroy=function(a){a[i]&&(a[i]=null)}}({}),function(a){function b(a,b){var c=b._cacheable,d=b.func;return function(e){var f=i(this,c),g=f.source===this&&f.watching[a]>0,h,k,l;return k=b._suspended,b._suspended=this,g=g&&f.lastSetValues[a]!==j(e),g&&(f.lastSetValues[a]=j(e),SC.propertyWillChange(this,a)),c&&delete f.cache[a],h=d.call(this,a,e),c&&(f.cache[a]=h),g&&SC.propertyDidChange(this,a),b._suspended=k,h}}function c(a,b){var c=b._cacheable,d=b.func;return c?function(){var b,c=i(this).cache;return a in c?c[a]:(b=c[a]=d.call(this,a),b)}:function(){return d.call(this,a)}}function d(a,b){this.func=a,this._cacheable=b&&b.cacheable,this._dependentKeys=b&&b.dependentKeys}function e(a,b,c){var d=a._dependentKeys,e=d?d.length:0;for(var f=0;f<e;f++)g(b,c,d[f])}function f(a,b,c){var d=h(a,c);d[b]=(d[b]||0)-1,SC.unwatch(a,c)}function g(a,b,c){var d=h(a,c);d[b]=(d[b]||0)+1,SC.watch(a,c)}function h(a,b){var c=i(a),d,e;return d=c.deps,d?d.__scproto__!==a&&(d=c.deps=m(d),d.__scproto__=a):d=c.deps={__scproto__:a},e=d[b],e?e.__scproto__!==a&&(e=d[b]=m(e),e.__scproto__=a):e=d[b]={__scproto__:a},e}var i=SC.meta,j=SC.guidFor,k=SC.USE_ACCESSORS,l=Array.prototype.slice,m=SC.platform.create,n=SC.platform.defineProperty;SC.ComputedProperty=d,d.prototype=new SC.Descriptor;var o={configurable:!0,enumerable:!0,get:function(){return undefined},set:SC.Descriptor.MUST_USE_SETTER},p=d.prototype;p.cacheable=function(a){return this._cacheable=a!==!1,this},p.property=function(){return this._dependentKeys=l.call(arguments),this},p.setup=function(a,d,f){o.get=c(d,this),o.set=b(d,this),n(a,d,o),o.get=o.set=null,e(this,a,d)},p.teardown=function(a,b){var c=this._dependentKeys,d=c?c.length:0;for(var e=0;e<d;e++)f(a,b,c[e]);return this._cacheable&&delete i(a).cache[b],null},p.didChange=function(a,b){this._cacheable&&this._suspended!==a&&delete i(a).cache[b]},p.get=function(a,b){var c,d;if(this._cacheable){d=i(a).cache;if(b in d)return d[b];c=d[b]=this.func.call(a,b)}else c=this.func.call(a,b);return c},p.set=function(a,b,c){var d=this._cacheable,e=i(a,d),f=e.source===a&&e.watching[b]>0,g,h,k;return h=this._suspended,this._suspended=a,f=f&&e.lastSetValues[b]!==j(c),f&&(e.lastSetValues[b]=j(c),SC.propertyWillChange(a,b)),d&&delete e.cache[b],g=this.func.call(a,b,c),d&&(e.cache[b]=g),f&&SC.propertyDidChange(a,b),this._suspended=h,g},p.val=function(a,b){return i(a,!1).values[b]},SC.platform.hasPropertyAccessors?k||(p.setup=function(a,b){n(a,b,o),e(this,a,b)}):p.setup=function(a,b,c){a[b]=undefined,e(this,a,b)},SC.computed=function(a){return new d(a)}}({}),function(a){function b(a,b){var c=i(a,b),d=[];if(!c)return d;var e;for(var f in c){if(p[f]||!c[f])continue;var g=c[f];for(var h in g){if(p[h]||!g[h])continue;e=g[h],d.push([e.target,e.method])}}return d}function c(a,b){var c=i(a,b);if(!c)return!1;for(var d in c){if(p[d]||!c[d])continue;var e=c[d];for(var f in e){if(p[f]||!e[f])continue;return!0}}var g=o(a,["listeners"],!0);return g[b]=null,!1}function d(a,b){a!==SC&&"function"==typeof a.sendEvent&&a.sendEvent.apply(a,n.call(arguments,1));var c=i(a,b);return c?(h(c,arguments),!0):!1}function e(a){var b=l(a,!1).listeners,c=[];if(b)for(var d in b)!p[d]&&b[d]&&c.push(d);return c}function f(a,b,c,d){!d&&"function"==typeof c&&(d=c,c=null);var e=j(a,b,c,!0),f=m(d);e&&e[f]&&(e[f]=null),a&&"function"==typeof a.didRemoveListener&&a.didRemoveListener(b,c,d)}function g(a,b,c,d,e){!d&&"function"==typeof c&&(d=c,c=null);var f=j(a,b,c,!0),g=m(d),h;return f[g]?f[g].xform=e:f[g]={target:c,method:d,xform:e},"function"==typeof a.didAddListener&&a.didAddListener(b,c,d),h}function h(a,b){for(var c in a){if(p[c])continue;var d=a[c];for(var e in d){if(p[e])continue;var f=d[e];if(!f)continue;var g=f.method,h=f.target;h||(h=b[0]),"string"==typeof g&&(g=h[g]);var i=f.xform;i?i(h,g,b):g.apply(h,b)}}}function i(a,b){var c=l(a,!1).listeners;return c?c[b]||!1:!1}function j(a,b,c,d){var e=m(c);return o(a,["listeners",b,e],d)}var k=SC.platform.create,l=SC.meta,m=SC.guidFor,n=Array.prototype.slice,o=SC.metaPath,p={__sc_source__:!0};SC.addListener=g,SC.removeListener=f,SC.sendEvent=d,SC.hasListeners=c,SC.watchedEvents=e,SC.listenersFor=b}({}),function(a){function b(a,b,c){var e=c[0],f=d(c[1]),g;b.length>2&&(g=SC.getPath(e,f)),b.call(a,e,f,g)}function c(a){return function(b,c,d){var f=d[0],g=e(d[1]),h;c.length>2&&(h=SC.getPath(f,g)),a.unshift(f,g,h),c.apply(b,a)}}function d(a){return a.slice(0,-7)}function e(a){return a.slice(0,-7)}function f(a){return a+k}function g(a){return a+j}function h(){r.empty(),!!q&&q.array.length!==0&&q.forEach(function(a,b){SC.sendEvent(a,b)})}function i(a,b,c){n&&!c?q.contains(a,b)||q.add(a,b):SC.sendEvent(a,b)}var j=":change",k=":before",l=SC.guidFor,m=SC.normalizePath,n=0,o=Array.prototype.slice,p=function(a){this.set={},a&&(this.array=[])};p.prototype.add=function(a,b){var c=this.set,d=SC.guidFor(a),e;c[d]||(c[d]={}),c[d][b]=!0,(e=this.array)&&e.push([a,b])},p.prototype.contains=function(a,b){var c=this.set,d=SC.guidFor(a),e=c[d];return e&&e[b]},p.prototype.empty=function(){this.set={},this.array=[]},p.prototype.forEach=function(a){var b=this.array;this.empty(),b.forEach(function(b){a(b[0],b[1])})};var q=new p(!0),r=new p;SC.beginPropertyChanges=function(){return n++,this},SC.endPropertyChanges=function(){n--,n<=0&&h()};var s=c([]);SC.addObserver=function(a,b,d,e){b=m(b);var f;if(arguments.length>4){var h=o.call(arguments,4);f=c(h)}else f=s;return SC.addListener(a,g(b),d,e,f),SC.watch(a,b),this},SC.observersFor=function(a,b){return SC.listenersFor(a,g(b))},SC.removeObserver=function(a,b,c,d){return b=m(b),SC.unwatch(a,b),SC.removeListener(a,g(b),c,d),this},SC.addBeforeObserver=function(a,c,d,e){return c=m(c),SC.addListener(a,f(c),d,e,b),SC.watch(a,c),this},SC.beforeObserversFor=function(a,b){return SC.listenersFor(a,f(b))},SC.removeBeforeObserver=function(a,b,c,d){return b=m(b),SC.unwatch(a,b),SC.removeListener(a,f(b),c,d),this},SC.notifyObservers=function(a,b){i(a,g(b))},SC.notifyBeforeObservers=function(a,b){var c,d,e=!1;if(n)if(!r.contains(a,b))r.add(a,b),e=!0;else return;i(a,f(b),e)}}({}),function(a){function b(a,b){d(a,b,"didChange")}function c(a,b){d(a,b,"willChange")}function d(a,b,c){var d=p(a,!1),e=d.chainWatchers;if(!!e&&e.__scproto__===a){e=e[b];if(!e)return;for(var f in e){if(!e.hasOwnProperty(f))continue;e[f][c](a,b)}}}function e(a){var b=p(a),c=b.chains;return c?c._value!==a&&(c=b.chains=c.copy(a)):c=b.chains=new D(null,null,a),c}function f(a){return p(a,!1).proto===a}function g(a){if(C.length!==0){var b=C;C=[],b.forEach(function(a){a[0].add(a[1])}),a!==!1&&C.length>0&&setTimeout(g,1)}}function h(a,b,c){if(!!a&&"object"==typeof a){var d=p(a,!1),e=d.chainWatchers;if(!e||e.__scproto__!==a)return;e[b]&&delete e[b][o(c)],SC.unwatch(a,b)}}function i(a,b,c){if(!!a&&"object"==typeof a){var d=p(a),e=d.chainWatchers;if(!e||e.__scproto__!==a)e=d.chainWatchers={__scproto__:a};e[b]||(e[b]={}),e[b][o(c)]=c,SC.watch(a,b)}}function j(a,b){var c=B,d=!c;d&&(c=B={}),l("propertyDidChange",a,b,c),d&&(B=null)}function k(a,b){var c=A,d=!c;d&&(c=A={}),l("propertyWillChange",a,b,c),d&&(A=null)}function l(a,b,c,d){var e=o(b);d[e]||(d[e]={});if(!d[e][c]){d[e][c]=!0;var f=p(b,!1).deps,g=SC[a];f=f&&f[c];if(f)for(var h in f){if(z[h])continue;g(b,h)}}}function m(a){return a==="*"||!y.test(a)}function n(a){return a.match(x)[0]}var o=SC.guidFor,p=SC.meta,q=SC.get,r=SC.set,s=SC.normalizeTuple.primitive,t=SC.normalizePath,u=SC.SIMPLE_PROPERTY,v=SC.GUID_KEY,w=SC.notifyObservers,x=/^([^\.\*]+)/,y=/[\.\*]/,z={__scproto__:!0},A,B,C=[],D=function(a,b,c,d){var e;this._parent=a,this._key=b,this._watching=c===undefined,this._value=c||a._value&&!f(a._value)&&q(a._value,b),this._separator=d||".",this._paths={},this._watching&&(this._object=a._value,this._object&&i(this._object,this._key,this))},E=D.prototype;E.destroy=function(){if(this._watching){var a=this._object;a&&h(a,this._key,this),this._watching=!1}},E.copy=function(a){var b=new D(null,null,a,this._separator),c=this._paths,d;for(d in c)if(c[d]>0)b.add(d);else continue;return b},E.add=function(a){var b,c,d,e,f,g;g=this._paths,g[a]=(g[a]||0)+1,b=this._value,c=s(b,a);if(c[0]&&c[0]===b)a=c[1],d=n(a),a=a.slice(d.length+1);else{if(!c[0]){C.push([this,a]);return}e=c[0],d=a.slice(0,0-(c[1].length+1)),f=a.slice(d.length,d.length+1),a=c[1]}this.chain(d,a,e,f)},E.remove=function(a){var b,c,d,e,f;f=this._paths,f[a]>0&&f[a]--,b=this._value,c=s(b,a),c[0]===b?(a=c[1],d=n(a),a=a.slice(d.length+1)):(e=c[0],d=a.slice(0,0-(c[1].length+1)),a=c[1]),this.unchain(d,a)},E.count=0,E.chain=function(a,b,c,d){var e=this._chains,f;e||(e=this._chains={}),f=e[a],f||(f=e[a]=new D(this,a,c,d)),f.count++,b&&b.length>0&&(a=n(b),b=b.slice(a.length+1),f.chain(a,b))},E.unchain=function(a,b){var c=this._chains,d=c[a];b&&b.length>1&&(a=n(b),b=b.slice(a.length+1),d.unchain(a,b)),d.count--,d.count<=0&&(delete c[d._key],d.destroy())},E.willChange=function(){var a=this._chains;if(a)for(var b in a){if(!a.hasOwnProperty(b))continue;a[b].willChange()}this._parent&&this._parent.chainWillChange(this,this._key,1)},E.chainWillChange=function(a,b,c){this._key&&(b=this._key+this._separator+b),this._parent?this._parent.chainWillChange(this,b,c+1):(c>1&&SC.propertyWillChange(this._value,b),b="this."+b,this._paths[b]>0&&SC.propertyWillChange(this._value,b))},E.chainDidChange=function(a,b,c){this._key&&(b=this._key+this._separator+b),this._parent?this._parent.chainDidChange(this,b,c+1):(c>1&&SC.propertyDidChange(this._value,b),b="this."+b,this._paths[b]>0&&SC.propertyDidChange(this._value,b))},E.didChange=function(){if(this._watching){var a=this._parent._value;a!==this._object&&(h(this._object,this._key,this),this._object=a,i(a,this._key,this)),this._value=a&&!f(a)?q(a,this._key):undefined}var b=this._chains;if(b)for(var c in b){if(!b.hasOwnProperty(c))continue;b[c].didChange()}this._parent&&this._parent.chainDidChange(this,this._key,1)};var F=SC.SIMPLE_PROPERTY.watched;SC.watch=function(a,b){if(b==="length"&&SC.typeOf(a)==="array")return this;var c=p(a),d=c.watching,f;return b=t(b),d[b]?d[b]=(d[b]||0)+1:(d[b]=1,m(b)?(f=c.descs[b],f=f?f.watched:F,f&&SC.defineProperty(a,b,f)):e(a).add(b)),this},SC.isWatching=function(a,b){return!!p(a).watching[b]},SC.watch.flushPending=g,SC.unwatch=function(a,b){if(b==="length"&&SC.typeOf(a)==="array")return this;var c=p(a).watching,d,f;return b=t(b),c[b]===1?(c[b]=0,m(b)?(d=p(a).descs[b],d=d?d.unwatched:u,d&&SC.defineProperty(a,b,d)):e(a).remove(b)):c[b]>1&&c[b]--,this},SC.rewatch=function(a){var b=p(a,!1),c=b.chains,d=b.bindings,f,g;v in a&&!a.hasOwnProperty(v)&&SC.generateGuid(a,"sc"),c&&c._value!==a&&e(a);if(d&&b.proto!==a)for(f in d)g=!z[f]&&a[f],g&&g instanceof SC.Binding&&g.fromDidChange(a);return this},SC.propertyWillChange=function(a,b){var d=p(a,!1),e=d.proto,f=d.descs[b];e!==a&&(f&&f.willChange&&f.willChange(a,b),k(a,b),c(a,b),SC.notifyBeforeObservers(a,b))},SC.propertyDidChange=function(a,c){var d=p(a,!1),e=d.proto,f=d.descs[c];e!==a&&(f&&f.didChange&&f.didChange(a,c),j(a,c),b(a,c),SC.notifyObservers(a,c))}}({}),function(a){function b(a,c,d){var e=a.length;for(var f in c){if(!c.hasOwnProperty||!c.hasOwnProperty(f))continue;var g=c[f];a[e]=f;if(g&&g.toString===q)g[z]=a.join(".");else if(f==="SC"||SC.Namespace&&g instanceof SC.Namespace){if(d[SC.guidFor(g)])continue;d[SC.guidFor(g)]=!0,b(a,g,d)}}a.length=e}function c(a,b,d){if(!d[SC.guidFor(b)]){d[SC.guidFor(b)]=!0;if(b.properties){var e=b.properties;for(var f in e)e.hasOwnProperty(f)&&(a[f]=!0)}else b.mixins&&b.mixins.forEach(function(b){c(a,b,d)})}}function d(a,b,c){var e=SC.guidFor(a);if(c[e])return!1;c[e]=!0;if(a===b)return!0;var f=a.mixins,g=f?f.length:0;while(--g>=0)if(d(f[g],b,c))return!0;return!1}function e(a,b,c){var d={},e={},j=SC.meta(a),k=j.required,m,q,r,s,t,v=SC._mixinBindings;i(b,l(a),d,e,a),n.detect(a)&&(q=e.willApplyProperty||a.willApplyProperty,r=e.didApplyProperty||a.didApplyProperty);for(m in d){if(!d.hasOwnProperty(m))continue;t=d[m],s=e[m];if(t===o){if(!(m in a)){if(!c)throw new Error("Required property not defined: "+m);k=h(a),k.__sc_count__++,k[m]=!0}}else{while(t instanceof p){var w=t.methodName;d[w]?(s=e[w],t=d[w]):j.descs[w]?(t=j.descs[w],s=t.val(a,w)):(s=a[w],t=SC.SIMPLE_PROPERTY)}q&&q.call(a,m);var y=g(s),z=y&&g(a[m]),A=f(s),B=A&&f(a[m]),C,D;if(z){C=z.length;for(D=0;D<C;D++)SC.removeObserver(a,z[D],null,m)}if(B){C=B.length;for(D=0;D<C;D++)SC.removeBeforeObserver(a,B[D],null,m)}s=v(a,m,s,j),x(a,m,t,s);if(y){C=y.length;for(D=0;D<C;D++)SC.addObserver(a,y[D],null,m)}if(A){C=A.length;for(D=0;D<C;D++)SC.addBeforeObserver(a,A[D],null,m)}k&&k[m]&&(k=h(a),k.__sc_count__--,k[m]=!1),r&&r.call(a,m)}}if(!c&&k&&k.__sc_count__>0){var E=[];for(m in k){if(u[m])continue;E.push(m)}throw new Error("Required properties not defined: "+E.join(","))}return a}function f(a){return"function"==typeof a&&a.__sc_observesBefore__}function g(a){return"function"==typeof a&&a.__sc_observes__}function h(a){var b=SC.meta(a),c=b.required;if(!c||c.__scproto__!==a)c=b.required=c?v(c):{__sc_count__:0},c.__scproto__=a;return c}function i(a,b,c,d,e){function f(a){delete c[a],delete d[a]}var g=a.length,h,k,l,n,p,q,r,s;for(h=0;h<g;h++){k=a[h];if(!k)throw new Error("Null value found in SC.mixin()");if(k instanceof m){l=SC.guidFor(k);if(b[l])continue;b[l]=k,n=k.properties}else n=k;if(n){s=d.concatenatedProperties||e.concatenatedProperties,n.concatenatedProperties&&(s=s?s.concat(n.concatenatedProperties):n.concatenatedProperties);for(q in n){if(!n.hasOwnProperty(q))continue;p=n[q];if(p instanceof SC.Descriptor){if(p===o&&c[q])continue;c[q]=p,d[q]=undefined}else{if(j(p)){r=c[q]===SC.SIMPLE_PROPERTY&&d[q],r||(r=e[q]),"function"!=typeof r&&(r=null);if(r){var t=p.__sc_observes__,u=p.__sc_observesBefore__;p=SC.wrap(p,r),p.__sc_observes__=t,p.__sc_observesBefore__=u}}else if(s&&s.indexOf(q)>=0||q==="concatenatedProperties"){var v=d[q]||e[q];p=v?v.concat(p):SC.makeArray(p)}c[q]=SC.SIMPLE_PROPERTY,d[q]=p}}n.hasOwnProperty("toString")&&(e.toString=n.toString)}else k.mixins&&(i(k.mixins,b,c,d,e),k._without&&k._without.forEach(f))}}function j(a){return"function"!=typeof a||a.isMethod===!1?!1:w.indexOf(a)<0}function k(a,b){return b&&b.length>0&&(a.mixins=s.call(b,function(a){if(a instanceof m)return a;var b=new m;return b.properties=a,b})),a}function l(a,b){var c=SC.meta(a,b!==!1),d=c.mixins;return b===!1?d||t:(d?d.__scproto__!==a&&(d=c.mixins=v(d),d.__scproto__=a):d=c.mixins={__scproto__:a},d)}var m,n,o,p,q,r,s=Array.prototype.map,t={},u={__scproto__:!0,__sc_count__:!0},v=SC.platform.create,w=[Boolean,Object,Number,Array,Date,String],x=SC.defineProperty;SC._mixinBindings=function(a,b,c,d){return c},SC.mixin=function(a){var b=Array.prototype.slice.call(arguments,1);return e(a,b,!1)},m=function(){return k(this,arguments)},m._apply=e,m.applyPartial=function(a){var b=Array.prototype.slice.call(arguments,1);return e(a,b,!0)},m.create=function(){q.processed=!1;var a=this;return k(new a,arguments)},m.prototype.reopen=function(){var a,b;this.properties&&(a=m.create(),a.properties=this.properties,delete this.properties,this.mixins=[a]);var c=arguments.length,d=this.mixins,e;for(e=0;e<c;e++)a=arguments[e],a instanceof m?d.push(a):(b=m.create(),b.properties=a,d.push(b));return this};var y=[];m.prototype.apply=function(a){return y.length=0,y[0]=this,e(a,y,!1)},m.prototype.applyPartial=function(a){return y.length=0,y[0]=this,e(a,y,!0)},m.prototype.detect=function(a){return a?a instanceof m?d(a,this,{}):!!l(a,!1)[SC.guidFor(this)]:!1},m.prototype.without=function(){var a=new m(this);return a._without=Array.prototype.slice.call(arguments),a},m.prototype.keys=function(){var a={},b={},d=[];c(a,this,b);for(var e in a)a.hasOwnProperty(e)&&d.push(e);return d};var z=SC.GUID_KEY+"_name";r=function(a){var b=a.superclass;if(b)return b[z]?b[z]:r(b);return},q=function(){!this[z]&&!q.processed&&(q.processed=!0,b([],window,{}));if(this[z])return this[z];var a=r(this);return a?"(subclass of "+a+")":"(unknown mixin)"},m.prototype.toString=q,m.mixins=function(a){var b=[],c=l(a,!1),d,e;for(d in c){if(u[d])continue;e=c[d],e.properties||b.push(c[d])}return b},o=new SC.Descriptor,o.toString=function(){return"(Required Property)"},SC.required=function(){return o},p=function(a){this.methodName=a},p.prototype=new SC.Descriptor,SC.alias=function(a){return new p(a)},SC.Mixin=m,n=m.create({willApplyProperty:SC.required(),didApplyProperty:SC.required()}),SC.MixinDelegate=n,SC.observer=function(a){var b=Array.prototype.slice.call(arguments,1);return a.__sc_observes__=b,a},SC.beforeObserver=function(a){var b=Array.prototype.slice.call(arguments,1);return a.__sc_observesBefore__=b,a}}({}),function(a){}({}),function(a){function b(a,b,c){b.call(a,c[0],c[2],c[3])}function c(a,b){function c(c){var d=f(c,a);return b===undefined?!!d:b===d}return c}function d(a){return h.push(a),null}function e(){return h.length===0?{}:h.pop()}var f=SC.get,g=SC.set,h=[];SC.Enumerable=SC.Mixin.create({isEnumerable:!0,nextObject:SC.required(Function),firstObject:SC.computed(function(){if(f(this,"length")===0)return undefined;if(SC.Array&&SC.Array.detect(this))return this.objectAt(0);var a=e(),b;return b=this.nextObject(0,null,a),d(a),b}).property("[]").cacheable(),lastObject:SC.computed(function(){var a=f(this,"length");if(a===0)return undefined;if(SC.Array&&SC.Array.detect(this))return this.objectAt(a-1);var b=e(),c=0,g,h=null;do h=g,g=this.nextObject(c++,h,b);while(g!==undefined);return d(b),h}).property("[]").cacheable(),contains:function(a){return this.find(function(b){return b===a})!==undefined},forEach:function(a,b){if(typeof a!="function")throw new TypeError;var c=f(this,"length"),g=null,h=e();b===undefined&&(b=null);for(var i=0;i<c;i++){var j=this.nextObject(i,g,h);a.call(b,j,i,this),g=j}return g=null,h=d(h),this},getEach:function(a){return this.map(function(b){return f(b,a)})},setEach:function(a,b){return this.forEach(function(c){g(c,a,b)})},map:function(a,b){var c=[];return this.forEach(function(d,e,f){c[e]=a.call(b,d,e,f)}),c},mapProperty:function(a){return this.map(function(b){return f(b,a)})},filter:function(a,b){var c=[];return this.forEach(function(d,e,f){a.call(b,d,e,f)&&c.push(d)}),c},filterProperty:function(a,b){return this.filter(c(a,b))},find:function(a,b){var c=f(this,"length");b===undefined&&(b=null);var g=null,h,i=!1,j,k=e();for(var l=0;l<c&&!i;l++){h=this.nextObject(l,g,k);if(i=a.call(b,h,l,this))j=h;g=h}return h=g=null,k=d(k),j},findProperty:function(a,b){return this.find(c(a,b))},every:function(a,b){return!this.find(function(c,d,e){return!a.call(b,c,d,e)})},everyProperty:function(a,b){return this.every(c(a,b))},some:function(a,b){return!!this.find(function(c,d,e){return!!a.call(b,c,d,e)})},someProperty:function(a,b){return this.some(c(a,b))},reduce:function(a,b,c){if(typeof a!="function")throw new TypeError;var d=b;return this.forEach(function(b,e){d=a.call(null,d,b,e,this,c)},this),d},invoke:function(a){var b,c=[];return arguments.length>1&&(b=Array.prototype.slice.call(arguments,1)),this.forEach(function(d,e){var f=d&&d[a];"function"==typeof f&&(c[e]=b?f.apply(d,b):f.call(d))},this),c},toArray:function(){var a=[];return this.forEach(function(b,c){a[c]=b}),a},compact:function(){return this.without(null)},without:function(a){if(!this.contains(a))return this;var b=[];return this.forEach(function(c){c!==a&&(b[b.length]=c)}),b},uniq:function(){var a=[],b=!1;return this.forEach(function(c){a.indexOf(c)<0?a[a.length]=c:b=!0}),b?a:this},"[]":SC.computed(function(a,b){return this}).property().cacheable(),addEnumerableObserver:function(a,c){var d=c&&c.willChange||"enumerableWillChange",e=c&&c.didChange||"enumerableDidChange",g=f(this,"hasEnumerableObservers");return g||SC.propertyWillChange(this,"hasEnumerableObservers"),SC.addListener(this,"@enumerable:before",a,d,b),SC.addListener(this,"@enumerable:change",a,e,b),g||SC.propertyDidChange(this,"hasEnumerableObservers"),this},removeEnumerableObserver:function(a,b){var c=b&&b.willChange||"enumerableWillChange",d=b&&b.didChange||"enumerableDidChange",e=f(this,"hasEnumerableObservers");return e&&SC.propertyWillChange(this,"hasEnumerableObservers"),SC.removeListener(this,"@enumerable:before",a,c),SC.removeListener(this,"@enumerable:change",a,d),e&&SC.propertyDidChange(this,"hasEnumerableObservers"),this},hasEnumerableObservers:SC.computed(function(){return SC.hasListeners(this,"@enumerable:change")||SC.hasListeners(this,"@enumerable:before")}).property().cacheable(),enumerableContentWillChange:function(a,b){var c,d,e;return"number"==typeof a?c=a:a?c=f(a,"length"):c=a=-1,"number"==typeof b?d=b:b?d=f(b,"length"):d=b=-1,e=d<0||c<0||d-c!==0,a===-1&&(a=null),b===-1&&(b=null),SC.propertyWillChange(this,"[]"),e&&SC.propertyWillChange(this,"length"),SC.sendEvent(this,"@enumerable:before",a,b),this},enumerableContentDidChange:function(a,b){var c=this.propertyDidChange,d,e,g;return"number"==typeof a?d=a:a?d=f(a,"length"):d=a=-1,"number"==typeof b?e=b:b?e=f(b,"length"):e=b=-1,g=e<0||d<0||e-d!==0,a===-1&&(a=null),b===-1&&(b=null),SC.sendEvent(this,"@enumerable:change",a,b),g&&SC.propertyDidChange(this,"length"),SC.propertyDidChange(this,"[]"),this}})}({}),function(a){function b(a,b,c){b.call(a,c[0],c[2],c[3],c[4])}function c(a){return a===null||a===undefined}var d=SC.get,e=SC.set,f=SC.meta;SC.Array=SC.Mixin.create(SC.Enumerable,{isSCArray:!0,length:SC.required(),objectAt:function(a){return a<0||a>=d(this,"length")?undefined:d(this,a)},nextObject:function(a){return this.objectAt(a)},"[]":SC.computed(function(a,b){return b!==undefined&&this.replace(0,d(this,"length"),b),this}).property().cacheable(),contains:function(a){return this.indexOf(a)>=0},slice:function(a,b){var e=[],f=d(this,"length");c(a)&&(a=0);if(c(b)||b>f)b=f;while(a<b)e[e.length]=this.objectAt(a++);return e},indexOf:function(a,b){var c,e=d(this,"length");b===undefined&&(b=0),b<0&&(b+=e);for(c=b;c<e;c++)if(this.objectAt(c,!0)===a)return c;return-1},lastIndexOf:function(a,b){var c,e=d(this,"length");b===undefined&&(b=e-1),b<0&&(b+=e);for(c=b;c>=0;c--)if(this.objectAt(c)===a)return c;return-1},addArrayObserver:function(a,c){var e=c&&c.willChange||"arrayWillChange",f=c&&c.didChange||"arrayDidChange",g=d(this,"hasArrayObservers");return g||SC.propertyWillChange(this,"hasArrayObservers"),SC.addListener(this,"@array:before",a,e,b),SC.addListener(this,"@array:change",a,f,b),g||SC.propertyDidChange(this,"hasArrayObservers"),this},removeArrayObserver:function(a,c){var e=c&&c.willChange||"arrayWillChange",f=c&&c.didChange||"arrayDidChange",g=d(this,"hasArrayObservers");return g&&SC.propertyWillChange(this,"hasArrayObservers"),SC.removeListener(this,"@array:before",a,e,b),SC.removeListener(this,"@array:change",a,f,b),g&&SC.propertyDidChange(this,"hasArrayObservers"),this},hasArrayObservers:SC.computed(function(){return SC.hasListeners(this,"@array:change")||SC.hasListeners(this,"@array:before")}).property().cacheable(),arrayContentWillChange:function(a,b,c){a===undefined?(a=0,b=c=-1):(b||(b=0),c||(c=0)),SC.sendEvent(this,"@array:before",a,b,c);var e,f;if(a>=0&&b>=0&&d(this,"hasEnumerableObservers")){e=[],f=a+b;for(var g=a;g<f;g++)e.push(this.objectAt(g))}else e=b;return this.enumerableContentWillChange(e,c),SC.isWatching(this,"@each")&&d(this,"@each"),this},arrayContentDidChange:function(a,b,c){a===undefined?(a=0,b=c=-1):(b||(b=0),c||(c=0));var e,f;if(a>=0&&c>=0&&d(this,"hasEnumerableObservers")){e=[],f=a+c;for(var g=a;g<f;g++)e.push(this.objectAt(g))}else e=c;return this.enumerableContentDidChange(b,e),SC.sendEvent(this,"@array:change",a,b,c),this},"@each":SC.computed(function(){return this.__each||(this.__each=new SC.EachProxy(this)),this.__each}).property().cacheable()})}({}),function(a){SC.MutableEnumerable=SC.Mixin.create(SC.Enumerable,{addObject:SC.required(Function),addObjects:function(a){return SC.beginPropertyChanges(this),a.forEach(function(a){this.addObject(a)},this),SC.endPropertyChanges(this),this},removeObject:SC.required(Function),removeObjects:function(a){return SC.beginPropertyChanges(this),a.forEach(function(a){this.removeObject(a)},this),SC.endPropertyChanges(this),this}})}({}),function(a){var b="Index out of range",c=[],d=SC.get,e=SC.set;SC.MutableArray=SC.Mixin.create(SC.Array,SC.MutableEnumerable,{replace:SC.required(),insertAt:function(a,c){if(a>d(this,"length"))throw new Error(b);return this.replace(a,0,[c]),this},removeAt:function(a,e){var f=0;if("number"==typeof a){if(a<0||a>=d(this,"length"))throw new Error(b);e===undefined&&(e=1),this.replace(a,e,c)}return this},pushObject:function(a){return this.insertAt(d(this,"length"),a),a},pushObjects:function(a){return this.beginPropertyChanges(),a.forEach(function(a){this.pushObject(a)},this),this.endPropertyChanges(),this},popObject:function(){var a=d(this,"length");if(a===0)return null;var b=this.objectAt(a-1);return this.removeAt(a-1,1),b},shiftObject:function(){if(d(this,"length")===0)return null;var a=this.objectAt(0);return this.removeAt(0),a},unshiftObject:function(a){return this.insertAt(0,a),a},unshiftObjects:function(a){return this.beginPropertyChanges(),a.forEach(function(a){this.unshiftObject(a)},this),this.endPropertyChanges(),this},removeObject:function(a){var b=d(this,"length")||0;while(--b>=0){var c=this.objectAt(b);c===a&&this.removeAt(b)}return this},addObject:function(a){return this.contains(a)||this.pushObject(a),this}})}({}),function(a){var b=SC.get,c=SC.set;SC.Observable=SC.Mixin.create({isObserverable:!0,get:function(a){return b(this,a)},set:function(a,b){return c(this,a,b),this},setProperties:function(a){SC.beginPropertyChanges(this);for(var b in a)a.hasOwnProperty(b)&&c(this,b,a[b]);return SC.endPropertyChanges(this),this},beginPropertyChanges:function(){return SC.beginPropertyChanges(),this},endPropertyChanges:function(){return SC.endPropertyChanges(),this},propertyWillChange:function(a){return SC.propertyWillChange(this,a),this},propertyDidChange:function(a){return SC.propertyDidChange(this,a),this},notifyPropertyChange:function(a){return this.propertyWillChange(a),this.propertyDidChange(a),this},addObserver:function(a,b,c){SC.addObserver(this,a,b,c)},removeObserver:function(a,b,c){SC.removeObserver(this,a,b,c)},hasObserverFor:function(a){return SC.hasListeners(this,a+":change")},unknownProperty:function(a){return undefined},setUnknownProperty:function(a,b){this[a]=b},getPath:function(a){return SC.getPath(this,a)},setPath:function(a,b){return SC.setPath(this,a,b),this},incrementProperty:function(a,d){return d||(d=1),c(this,a,(b(this,a)||0)+d),b(this,a)},decrementProperty:function(a,d){return d||(d=1),c(this,a,(b(this,a)||0)-d),b(this,a)},toggleProperty:function(a){return c(this,a,!b(this,a)),b(this,a)},observersForKey:function(a){return SC.observersFor(this,a)}})}({}),function(a){function b(){var a=!1,b,e=!1,g=!1,i=function(){a||f(i,"proto"),b?(this.reopen.apply(this,b),b=null,c(this),this.init.apply(this,arguments)):(g?c(this):this[SC.GUID_KEY]=undefined,e===!1&&(e=this.init),e.apply(this,arguments))};return i.toString=d,i._prototypeMixinDidChange=function(){a=!1},i._initMixins=function(a){b=a},SC.defineProperty(i,"proto",SC.computed(function(){return a||(a=!0,i.PrototypeMixin.applyPartial(i.prototype),g=!!h(i.prototype,!1).chains),this.prototype})),i}var c=SC.rewatch,d=SC.Mixin.prototype.toString,e=SC.set,f=SC.get,g=SC.platform.create,h=SC.meta,i=b();i.PrototypeMixin=SC.Mixin.create({reopen:function(){return SC.Mixin._apply(this,arguments,!0),this},isInstance:!0,init:function(){},isDestroyed:!1,destroy:function(){return e(this,"isDestroyed",!0),SC.run.schedule("destroy",this,this._scheduledDestroy),this},_scheduledDestroy:function(){this[SC.META_KEY]=null},bind:function(a,b){return b instanceof SC.Binding||(b=SC.Binding.from(b)),b.to(a).connect(this),b},toString:function(){return"<"+this.constructor.toString()+":"+SC.guidFor(this)+">"}}),i.__super__=null;var j=SC.Mixin
.create({ClassMixin:SC.required(),PrototypeMixin:SC.required(),isClass:!0,isMethod:!1,extend:function(){var a=b(),c;a.ClassMixin=SC.Mixin.create(this.ClassMixin),a.PrototypeMixin=SC.Mixin.create(this.PrototypeMixin),a.ClassMixin.ownerConstructor=a,a.PrototypeMixin.ownerConstructor=a;var d=a.PrototypeMixin;return d.reopen.apply(d,arguments),a.superclass=this,a.__super__=this.prototype,c=a.prototype=g(this.prototype),c.constructor=a,SC.generateGuid(c,"sc"),h(c).proto=c,SC.rewatch(c),a.subclasses=SC.Set?new SC.Set:null,this.subclasses&&this.subclasses.add(a),a.ClassMixin.apply(a),a},create:function(){var a=this;return arguments.length>0&&this._initMixins(arguments),new a},reopen:function(){var a=this.PrototypeMixin;return a.reopen.apply(a,arguments),this._prototypeMixinDidChange(),this},reopenClass:function(){var a=this.ClassMixin;return a.reopen.apply(a,arguments),SC.Mixin._apply(this,arguments,!1),this},detect:function(a){if("function"!=typeof a)return!1;while(a){if(a===this)return!0;a=a.superclass}return!1}});i.ClassMixin=j,j.apply(i),SC.CoreObject=i}({}),function(a){function b(a,c,d,e){var f,g,h;if("object"!=typeof a||a===null)return a;if(c&&(g=d.indexOf(a))>=0)return e[g];if(SC.typeOf(a)==="array"){f=a.slice();if(c){g=f.length;while(--g>=0)f[g]=b(f[g],c,d,e)}}else if(SC.Copyable&&SC.Copyable.detect(a))f=a.copy(c,d,e);else{f={};for(h in a){if(!a.hasOwnProperty(h))continue;f[h]=c?b(a[h],c,d,e):a[h]}}return c&&(d.push(a),e.push(f)),f}YES=!0,NO=!1,typeof console=="undefined"&&(window.console={},console.log=console.info=console.warn=console.error=function(){}),SC.EXTEND_PROTOTYPES=SC.ENV.EXTEND_PROTOTYPES!==!1;var c={},d="Boolean Number String Function Array Date RegExp Object".split(" ");d.forEach(function(a){c["[object "+a+"]"]=a.toLowerCase()});var e=Object.prototype.toString;SC.typeOf=function(a){var b;return b=a==null?String(a):c[e.call(a)]||"object",b==="function"?SC.Object&&SC.Object.detect(a)&&(b="class"):b==="object"&&(a instanceof Error?b="error":SC.Object&&a instanceof SC.Object?b="instance":b="object"),b},SC.none=function(a){return a===null||a===undefined},SC.empty=function(a){return a===null||a===undefined||a===""},SC.compare=function(a,b){if(a===b)return 0;var c=SC.typeOf(a),d=SC.typeOf(b),e=SC.Comparable;if(e){if(c==="instance"&&e.detect(a.constructor))return a.constructor.compare(a,b);if(d==="instance"&&e.detect(b.constructor))return 1-b.constructor.compare(b,a)}var f=SC.ORDER_DEFINITION_MAPPING;if(!f){var g=SC.ORDER_DEFINITION;f=SC.ORDER_DEFINITION_MAPPING={};var h,i;for(h=0,i=g.length;h<i;++h)f[g[h]]=h;delete SC.ORDER_DEFINITION}var j=f[c],k=f[d];if(j<k)return-1;if(j>k)return 1;switch(c){case"boolean":case"number":if(a<b)return-1;if(a>b)return 1;return 0;case"string":var l=a.localeCompare(b);if(l<0)return-1;if(l>0)return 1;return 0;case"array":var m=a.length,n=b.length,o=Math.min(m,n),p=0,q=0,r=arguments.callee;while(p===0&&q<o)p=r(a[q],b[q]),q++;if(p!==0)return p;if(m<n)return-1;if(m>n)return 1;return 0;case"instance":if(SC.Comparable&&SC.Comparable.detect(a))return a.compare(a,b);return 0;default:return 0}},SC.copy=function(a,c){return"object"!=typeof a||a===null?a:SC.Copyable&&SC.Copyable.detect(a)?a.copy(c):b(a,c,c?[]:null,c?[]:null)},SC.inspect=function(a){var b,c=[];for(var d in a)if(a.hasOwnProperty(d)){b=a[d];if(b==="toString")continue;SC.typeOf(b)===SC.T_FUNCTION&&(b="function() { ... }"),c.push(d+": "+b)}return"{"+c.join(" , ")+"}"},SC.isEqual=function(a,b){return a&&"function"==typeof a.isEqual?a.isEqual(b):a===b},SC.ORDER_DEFINITION=SC.ENV.ORDER_DEFINITION||["undefined","null","boolean","number","string","array","object","instance","function","class"],SC.keys=Object.keys,SC.keys||(SC.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}),SC.Error=function(){var a=Error.prototype.constructor.apply(this,arguments);for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])},SC.Error.prototype=SC.create(Error.prototype),SC.Logger=window.console}({}),function(a){var b=/[ _]/g,c={},d=/([a-z])([A-Z])/g;SC.STRINGS={},SC.String={fmt:function(a,b){var c=0;return a.replace(/%@([0-9]+)?/g,function(a,d){return d=d?parseInt(d,0)-1:c++,a=b[d],(a===null?"(null)":a===undefined?"":a).toString()})},loc:function(a,b){return a=SC.STRINGS[a]||a,SC.String.fmt(a,b)},w:function(a){return a.split(/\s+/)},decamelize:function(a){return a.replace(d,"$1_$2").toLowerCase()},dasherize:function(a){var d=c,e=d[a];return e?e:(e=SC.String.decamelize(a).replace(b,"-"),d[a]=e,e)}}}({}),function(a){var b=SC.get,c=SC.set;SC.Copyable=SC.Mixin.create({copy:SC.required(Function),frozenCopy:function(){if(SC.Freezable&&SC.Freezable.detect(this))return b(this,"isFrozen")?this:this.copy().freeze();throw new Error(SC.String.fmt("%@ does not support freezing",this))}})}({}),function(a){var b=SC.get,c=SC.set;SC.Freezable=SC.Mixin.create({isFrozen:!1,freeze:function(){return b(this,"isFrozen")?this:(c(this,"isFrozen",!0),this)}}),SC.FROZEN_ERROR="Frozen object cannot be modified."}({}),function(a){var b=SC.get,c=SC.set,d=SC.guidFor,e=SC.none;SC.Set=SC.CoreObject.extend(SC.MutableEnumerable,SC.Copyable,SC.Freezable,{length:0,clear:function(){if(this.isFrozen)throw new Error(SC.FROZEN_ERROR);var a=b(this,"length");return this.enumerableContentWillChange(a,0),c(this,"length",0),this.enumerableContentDidChange(a,0),this},isEqual:function(a){if(!SC.Enumerable.detect(a))return!1;var c=b(this,"length");if(b(a,"length")!==c)return!1;while(--c>=0)if(!a.contains(this[c]))return!1;return!0},add:SC.alias("addObject"),remove:SC.alias("removeObject"),pop:function(){if(b(this,"isFrozen"))throw new Error(SC.FROZEN_ERROR);var a=this.length>0?this[this.length-1]:null;return this.remove(a),a},push:SC.alias("addObject"),shift:SC.alias("pop"),unshift:SC.alias("push"),addEach:SC.alias("addObjects"),removeEach:SC.alias("removeObjects"),init:function(a){this._super(),a&&this.addObjects(a)},nextObject:function(a){return this[a]},firstObject:SC.computed(function(){return this.length>0?this[0]:undefined}).property("[]").cacheable(),lastObject:SC.computed(function(){return this.length>0?this[this.length-1]:undefined}).property("[]").cacheable(),addObject:function(a){if(b(this,"isFrozen"))throw new Error(SC.FROZEN_ERROR);if(e(a))return this;var f=d(a),g=this[f],h=b(this,"length"),i;return g>=0&&g<h&&this[g]===a?this:(i=[a],this.enumerableContentWillChange(null,i),h=b(this,"length"),this[f]=h,this[h]=a,c(this,"length",h+1),this.enumerableContentDidChange(null,i),this)},removeObject:function(a){if(b(this,"isFrozen"))throw new Error(SC.FROZEN_ERROR);if(e(a))return this;var f=d(a),g=this[f],h=b(this,"length"),i,j;return g>=0&&g<h&&this[g]===a&&(j=[a],this.enumerableContentWillChange(j,null),g<h-1&&(i=this[h-1],this[g]=i,this[d(i)]=g),delete this[f],delete this[h-1],c(this,"length",h-1),this.enumerableContentDidChange(j,null)),this},contains:function(a){return this[d(a)]>=0},copy:function(){var a=this.constructor,e=new a,f=b(this,"length");c(e,"length",f);while(--f>=0)e[f]=this[f],e[d(this[f])]=f;return e},toString:function(){var a=this.length,b,c=[];for(b=0;b<a;b++)c[b]=this[b];return"SC.Set<%@>".fmt(c.join(","))},isSet:!0});var f=SC.Set.create;SC.Set.create=function(a){return a&&SC.Enumerable.detect(a)?(SC.Logger.warn("Passing an enumerable to SC.Set.create() is deprecated and will be removed in a future version of SproutCore.  Use new SC.Set(items) instead"),new SC.Set(a)):f.apply(this,arguments)}}({}),function(a){SC.CoreObject.subclasses=new SC.Set,SC.Object=SC.CoreObject.extend(SC.Observable)}({}),function(a){var b=SC.get,c=SC.set;SC.ArrayProxy=SC.Object.extend(SC.MutableArray,{content:null,objectAtContent:function(a){return b(this,"content").objectAt(a)},replaceContent:function(a,c,d){b(this,"content").replace(a,c,d)},contentWillChange:SC.beforeObserver(function(){var a=b(this,"content"),c=a?b(a,"length"):0;this.arrayWillChange(a,0,c,undefined),a&&a.removeArrayObserver(this)},"content"),contentDidChange:SC.observer(function(){var a=b(this,"content"),c=a?b(a,"length"):0;a&&a.addArrayObserver(this),this.arrayDidChange(a,0,undefined,c)},"content"),objectAt:function(a){return b(this,"content")&&this.objectAtContent(a)},length:SC.computed(function(){var a=b(this,"content");return a?b(a,"length"):0}).property("content.length").cacheable(),replace:function(a,c,d){return b(this,"content")&&this.replaceContent(a,c,d),this},arrayWillChange:function(a,b,c,d){this.arrayContentWillChange(b,c,d)},arrayDidChange:function(a,b,c,d){this.arrayContentDidChange(b,c,d)},init:function(a){this._super(),a&&c(this,"content",a),this.contentDidChange()}})}({}),function(a){SC.ArrayController=SC.ArrayProxy.extend()}({}),function(a){}({}),function(a){var b=SC.String.fmt,c=SC.String.w,d=SC.String.loc,e=SC.String.decamelize,f=SC.String.dasherize;SC.EXTEND_PROTOTYPES&&(String.prototype.fmt=function(){return b(this,arguments)},String.prototype.w=function(){return c(this)},String.prototype.loc=function(){return d(this,arguments)},String.prototype.decamelize=function(){return e(this)},String.prototype.dashersize=function(){return f(this)})}({}),function(a){SC.EXTEND_PROTOTYPES&&(Function.prototype.property=function(){var a=SC.computed(this);return a.property.apply(a,arguments)},Function.prototype.observes=function(){return this.__sc_observes__=Array.prototype.slice.call(arguments),this},Function.prototype.observesBefore=function(){return this.__sc_observesBefore__=Array.prototype.slice.call(arguments),this})}({}),function(a){var b=SC.IS_BINDING=/^.+Binding$/;SC._mixinBindings=function(a,c,d,e){if(b.test(c)){d instanceof SC.Binding?d.to(c.slice(0,-7)):d=new SC.Binding(c.slice(0,-7),d),d.connect(a);var f=e.bindings;f?f.__scproto__!==a&&(f=e.bindings=SC.create(e.bindings),f.__scproto__=a):f=e.bindings={__scproto__:a},f[c]=!0}return d}}({}),function(a){}({}),function(a){}({}),function(a){SC.Comparable=SC.Mixin.create({isComparable:!0,compare:SC.required(Function)})}({}),function(a){}({}),function(a){SC.Namespace=SC.Object.extend()}({}),function(a){SC.Application=SC.Namespace.extend()}({}),function(a){function b(){n=null;for(var a in l){if(!l.hasOwnProperty(a))continue;var b=l[a];b.next&&(delete l[a],f(b.target,b.method,b.args,2))}}function c(a,b){b[this.tguid]&&delete b[this.tguid][this.mguid],l[a]&&f(this.target,this.method,this.args,2),delete l[a]}function d(){var a=+(new Date),b=-1;for(var c in l){if(!l.hasOwnProperty(c))continue;var e=l[c];if(e&&e.expires)if(a>=e.expires)delete l[c],f(e.target,e.method,e.args,2);else if(b<0||e.expires<b)b=e.expires}b>0&&setTimeout(d,b- +(new Date))}function e(){k=null,j.currentRunLoop&&j.end()}function f(a,b,c,d){return b===undefined&&(b=a,a=undefined),"string"==typeof b&&(b=a[b]),c&&d>0&&(c=c.length>d?g.call(c,d):null),b.apply(a||this,c||[])}var g=Array.prototype.slice,h,i=SC.Object.extend({_prev:null,init:function(a){this._prev=a,this.onceTimers={}},end:function(){return this.flush(),this._prev},schedule:function(a,b,c){var d=this._queues,e;d||(d=this._queues={}),e=d[a],e||(e=d[a]=[]);var f=arguments.length>3?g.call(arguments,3):null;return e.push({target:b,method:c,args:f}),this},flush:function(a){function b(a){f(a.target,a.method,a.args)}var c=this._queues,d,e,g,i,j;if(!c)return this;SC.watch.flushPending();if(a)while(this._queues&&(i=this._queues[a]))this._queues[a]=null,j=SC.LOG_BINDINGS&&a==="sync",j&&SC.Logger.log("Begin: Flush Sync Queue"),a==="sync"&&SC.beginPropertyChanges(),i.forEach(b),a==="sync"&&SC.endPropertyChanges(),j&&SC.Logger.log("End: Flush Sync Queue");else{d=SC.run.queues,g=d.length;do{this._queues=null;for(e=0;e<g;e++)a=d[e],i=c[a],j=SC.LOG_BINDINGS&&a==="sync",j&&SC.Logger.log("Begin: Flush Sync Queue"),a==="sync"&&SC.beginPropertyChanges(),i&&i.forEach(b),a==="sync"&&SC.endPropertyChanges(),j&&SC.Logger.log("End: Flush Sync Queue")}while(c=this._queues)}return h=null,this}});SC.RunLoop=i;var j;SC.run=j=function(a,b){var c,d;j.begin();if(a||b)c=f(a,b,arguments,2);return j.end(),c},SC.run.begin=function(){j.currentRunLoop=new i(j.currentRunLoop)},SC.run.end=function(){j.currentRunLoop=j.currentRunLoop.end()},SC.run.queues=["sync","actions","destroy","timers"],SC.run.schedule=function(a,b,c){var d=j.autorun();d.schedule.apply(d,arguments)};var k;SC.run.autorun=function(){return j.currentRunLoop||(j.begin(),SC.testing?j.end():k||(k=setTimeout(e,1))),j.currentRunLoop},SC.run.sync=function(){j.autorun(),j.currentRunLoop.flush("sync")};var l={},m=!1;SC.run.later=function(a,b){var c,e,f,h,i;return arguments.length===2&&"function"==typeof a?(i=b,b=a,a=undefined,c=[a,b]):(c=g.call(arguments),i=c.pop()),e=+(new Date)+i,f={target:a,method:b,expires:e,args:c},h=SC.guidFor(f),l[h]=f,j.once(l,d),h},SC.run.once=function(a,b){var d=SC.guidFor(a),e=SC.guidFor(b),f,h,i=j.autorun().onceTimers;return f=i[d]&&i[d][e],f&&l[f]?l[f].args=g.call(arguments):(h={target:a,method:b,args:g.call(arguments),tguid:d,mguid:e},f=SC.guidFor(h),l[f]=h,i[d]||(i[d]={}),i[d][e]=f,j.schedule("actions",h,c,f,i)),f};var n=!1;SC.run.next=function(a,c){var d,e;return d={target:a,method:c,args:g.call(arguments),next:!0},e=SC.guidFor(d),l[e]=d,n||(n=setTimeout(b,1)),e},SC.run.cancel=function(a){delete l[a]},SC.RunLoop.begin=SC.run.begin,SC.RunLoop.end=SC.run.end}({}),function(a){function b(a,b){var c=k(a,b._to);return e(b,c,a,"from")}function c(a,b){var c=b._operation,d=c?c(a,b._from,b._operand):k(a,b._from);return e(b,d,a,"to")}function d(a){return a===undefined||a===null||a===""||SC.isArray(a)&&j(a,"length")===0}function e(a,b,c,d){var e=a._typeTransform;e&&(b=e(b,a._placeholder));var f=a._transforms,g=f?f.length:0,h;for(h=0;h<g;h++){var i=f[h][d];i&&(b=i.call(this,b,c))}return b}function f(a,b){return a instanceof Array?a.length>1?b:a[0]:a}function g(a){return a instanceof Array?a:a===undefined||a===null?[]:[a]}SC.LOG_BINDINGS=!!SC.ENV.LOG_BINDINGS,SC.BENCHMARK_BINDING_NOTIFICATIONS=!!SC.ENV.BENCHMARK_BINDING_NOTIFICATIONS,SC.BENCHMARK_BINDING_SETUP=!!SC.ENV.BENCHMARK_BINDING_SETUP,SC.MULTIPLE_PLACEHOLDER="@@MULT@@",SC.EMPTY_PLACEHOLDER="@@EMPTY@@";var h={to:function(a){return!!a}},i={to:function(a){return!a}},j=SC.get,k=SC.getPath,l=SC.setPath,m=SC.guidFor,n=function(a,b,c){return k(a,b)&&k(a,c)},o=function(a,b,c){return k(a,b)||k(a,c)},p=SC.Object.extend({_direction:"fwd",init:function(a,b){this._from=b,this._to=a},from:function(a,b){return b||(b=a,a=null),this._from=b,this._object=a,this},to:function(a){return this._to=a,this},oneWay:function(a){return this._oneWay=a===undefined?!0:!!a,this},transform:function(a){return"function"==typeof a&&(a={to:a}),this._transforms||(this._transforms=[]),this._transforms.push(a),this},resetTransforms:function(){return this._transforms=null,this},single:function(a){return a===undefined&&(a=SC.MULTIPLE_PLACEHOLDER),this._typeTransform=f,this._placeholder=a,this},multiple:function(){return this._typeTransform=g,this._placeholder=null,this},bool:function(){return this.transform(h),this},notEmpty:function(a){return a||(a=SC.EMPTY_PLACEHOLDER),this.transform({to:function(b){return d(b)?a:b}}),this},notNull:function(a){return a||(a=SC.EMPTY_PLACEHOLDER),this.transform({to:function(b){return b==null?a:b}}),this},not:function(){return this.transform(i),this},isNull:function(){return this.transform(function(a){return a==null}),this},toString:function(){var a=this._oneWay?"[oneWay]":"";return SC.String.fmt("SC.Binding<%@>(%@ -> %@)%@",[m(this),this._from,this._to,a])},connect:function(a){var b=this._oneWay,c=this._operand;return SC.addObserver(a,this._from,this,this.fromDidChange),c&&SC.addObserver(a,c,this,this.fromDidChange),b||SC.addObserver(a,this._to,this,this.toDidChange),SC.meta(a,!1).proto!==a&&this._scheduleSync(a,"fwd"),this._readyToSync=!0,this},disconnect:function(a){var b=this._oneWay,c=this._operand;return SC.removeObserver(a,this._from,this,this.fromDidChange),c&&SC.removeObserver(a,c,this,this.fromDidChange),b||SC.removeObserver(a,this._to,this,this.toDidChange),this._readyToSync=!1,this},fromDidChange:function(a){this._scheduleSync(a,"fwd")},toDidChange:function(a){this._scheduleSync(a,"back")},_scheduleSync:function(a,b){var c=m(a),d=this[c];d||(SC.run.schedule("sync",this,this._sync,a),this[c]=b),d==="back"&&b==="fwd"&&(this[c]="fwd")},_sync:function(a){var d=SC.LOG_BINDINGS;if(!a.isDestroyed&&!!this._readyToSync){var e=m(a),f=this[e],g,h,i=this._from,j=this._to;delete this[e];var k=c(a,this),l=b(a,this);if(l===k)return;f==="fwd"?(d&&SC.Logger.log(" ",this.toString(),g,"->",k,a),SC.trySetPath(a,j,k)):f==="back"&&(d&&SC.Logger.log(" ",this.toString(),g,"<-",k,a),SC.trySetPath(a,i,l))}}});p.reopenClass({from:function(){var a=this,b=new a;return b.from.apply(b,arguments)},to:function(){var a=this,b=new a;return b.to.apply(b,arguments)},oneWay:function(a,b){var c=this,d=new c(null,a);return d.oneWay(b)},single:function(a){var b=this,c=new b(null,a);return c.single()},multiple:function(a){var b=this,c=new b(null,a);return c.multiple()},transform:function(a){var b=this,c=new b;return c.transform(a)},notEmpty:function(a,b){var c=this,d=new c(null,a);return d.notEmpty(b)},bool:function(a){var b=this,c=new b(null,a);return c.bool()},not:function(a){var b=this,c=new b(null,a);return c.not()},and:function(a,b){var c=this,d=(new c(null,a)).oneWay();return d._operand=b,d._operation=n,d},or:function(a,b){var c=this,d=(new c(null,a)).oneWay();return d._operand=b,d._operation=o,d}}),SC.Binding=p,SC.bind=function(a,b,c){return(new SC.Binding(b,c)).connect(a)},SC.oneWay=function(a,b,c){return(new SC.Binding(b,c)).oneWay().connect(a)}}({}),function(a){function b(a,b,c,d,e){var g=c._objects;g||(g=c._objects={});var h,i;while(--e>=d){var j=a.objectAt(e);j&&(SC.removeBeforeObserver(j,b,c,"contentKeyWillChange"),SC.removeObserver(j,b,c,"contentKeyDidChange"),i=f(j),h=g[i],h[h.indexOf(e)]=null)}}function c(a,b,c,d,e){var g=c._objects,h;g||(g=c._objects={});while(--e>=d){var i=a.objectAt(e);i&&(SC.addBeforeObserver(i,b,c,"contentKeyWillChange"),SC.addObserver(i,b,c,"contentKeyDidChange"),h=f(i),g[h]||(g[h]=[]),g[h].push(e))}}var d=SC.set,e=SC.get,f=SC.guidFor,g=SC.Object.extend(SC.Array,{init:function(a,b,c){this._super(),this._keyName=b,this._owner=c,this._content=a},objectAt:function(a){var b=this._content.objectAt(a);return b&&e(b,this._keyName)},length:function(){var a=this._content;return a?e(a,"length"):0}.property("[]").cacheable()}),h=/^.+:(before|change)$/;SC.EachProxy=SC.Object.extend({init:function(a){this._super(),this._content=a,a.addArrayObserver(this),SC.watchedEvents(this).forEach(function(a){this.didAddListener(a)},this)},unknownProperty:function(a,b){var c;return c=new g(this._content,a,this),(new SC.Descriptor).setup(this,a,c),this.beginObservingContentKey(a),c},arrayWillChange:function(a,c,d,f){var g=this._keys,h,i,j;j=d>0?c+d:-1,SC.beginPropertyChanges(this);for(h in g){if(!g.hasOwnProperty(h))continue;j>0&&b(a,h,this,c,j),i=e(this,h),SC.propertyWillChange(this,h),i&&i.arrayContentWillChange(c,d,f)}SC.propertyWillChange(this._content,"@each"),SC.endPropertyChanges(this)},arrayDidChange:function(a,b,d,f){var g=this._keys,h,i,j;j=f>0?b+f:-1,SC.beginPropertyChanges(this);for(h in g){if(!g.hasOwnProperty(h))continue;j>0&&c(a,h,this,b,j),i=e(this,h),i&&i.arrayContentDidChange(b,d,f),SC.propertyDidChange(this,h)}SC.propertyDidChange(this._content,"@each"),SC.endPropertyChanges(this)},didAddListener:function(a){h.test(a)&&this.beginObservingContentKey(a.slice(0,-7))},didRemoveListener:function(a){h.test(a)&&this.stopObservingContentKey(a.slice(0,-7))},beginObservingContentKey:function(a){var b=this._keys;b||(b=this._keys={});if(!b[a]){b[a]=1;var d=this._content,f=e(d,"length");c(d,a,this,0,f)}else b[a]++},stopObservingContentKey:function(a){var c=this._keys;if(c&&c[a]>0&&--c[a]<=0){var d=this._content,f=e(d,"length");b(d,a,this,0,f)}},contentKeyWillChange:function(a,b){var c=this._objects[f(a)],d=e(this,b),g=d&&c?c.length:0,h;for(h=0;h<g;h++)d.arrayContentWillChange(c[h],1,1)},contentKeyDidChange:function(a,b){var c=this._objects[f(a)],d=e(this,b),g=d&&c?c.length:0,h;for(h=0;h<g;h++)d.arrayContentDidChange(c[h],1,1);SC.propertyDidChange(this,b)}})}({}),function(a){var b=SC.get,c=SC.set,d=SC.Mixin.create(SC.MutableArray,SC.Observable,SC.Copyable,{get:function(a){return a==="length"?this.length:"number"==typeof a?this[a]:this._super(a)},objectAt:function(a){return this[a]},replace:function(a,c,d){if(this.isFrozen)throw SC.FROZEN_ERROR;var e=d?b(d,"length"):0;this.arrayContentWillChange(a,c,e);if(!d||d.length===0)this.splice(a,c);else{var f=[a,c].concat(d);this.splice.apply(this,f)}return this.arrayContentDidChange(a,c,e),this},unknownProperty:function(a,b){var c;return b!==undefined&&c===undefined&&(c=this[a]=b),c},indexOf:function(a,b){var c,d=this.length;b===undefined?b=0:b=b<0?Math.ceil(b):Math.floor(b),b<0&&(b+=d);for(c=b;c<d;c++)if(this[c]===a)return c;return-1},lastIndexOf:function(a,b){var c,d=this.length;b===undefined?b=d-1:b=b<0?Math.ceil(b):Math.floor(b),b<0&&(b+=d);for(c=b;c>=0;c--)if(this[c]===a)return c;return-1},copy:function(){return this.slice()}}),e=["length"];d.keys().forEach(function(a){Array.prototype[a]&&e.push(a)}),e.length>0&&(d=d.without.apply(d,e)),SC.NativeArray=d,SC.NativeArray.activate=function(){d.apply(Array.prototype)},SC.EXTEND_PROTOTYPES&&SC.NativeArray.activate()}({}),function(a){}({}),function(a){}({}),function(a){var b=SC.get,c=SC.set;SC.RenderBuffer=function(a){return SC._RenderBuffer.create({elementTag:a})},SC._RenderBuffer=SC.Object.extend({elementClasses:null,elementId:null,elementAttributes:null,elementTag:null,elementStyle:null,parentBuffer:null,init:function(){this._super(),c(this,"elementClasses",[]),c(this,"elementAttributes",{}),c(this,"elementStyle",{}),c(this,"childBuffers",[]),c(this,"elements",{})},push:function(a){return b(this,"childBuffers").pushObject(String(a)),this},addClass:function(a){return b(this,"elementClasses").pushObject(a),this},id:function(a){return c(this,"elementId",a),this},attr:function(a,c){return b(this,"elementAttributes")[a]=c,this},style:function(a,c){return b(this,"elementStyle")[a]=c,this},newBuffer:function(a,b,c,d){var e=SC._RenderBuffer.create({parentBuffer:b,elementTag:a});return d&&e.setProperties(d),c&&c.call(this,e),e},replaceWithBuffer:function(a){var c=b(this,"parentBuffer"),d=b(c,"childBuffers"),e=d.indexOf(this);a?d.splice(e,1,a):d.splice(e,1)},begin:function(a){return this.newBuffer(a,this,function(a){b(this,"childBuffers").pushObject(a)})},prepend:function(a){return this.newBuffer(a,this,function(a){b(this,"childBuffers").insertAt(0,a)})},replaceWith:function(a){var c=b(this,"parentBuffer");return this.newBuffer(a,c,function(a){this.replaceWithBuffer(a)})},insertAfter:function(a){var c=b(this,"parentBuffer");return this.newBuffer(a,c,function(a){var d=b(c,"childBuffers"),e=d.indexOf(this);d.insertAt(e+1,a)})},end:function(){var a=b(this,"parentBuffer");return a||this},remove:function(){this.replaceWithBuffer(null)},element:function(){return SC.$(this.string())[0]},string:function(){var a=b(this,"elementId"),c=b(this,"elementClasses"),d=b(this,"elementAttributes"),e=b(this,"elementStyle"),f=b(this,"elementTag"),g="",h=[],i,j=["<"+f];a&&j.push('id="'+a+'"'),c.length&&j.push('class="'+c.join(" ")+'"');if(!jQuery.isEmptyObject(e)){for(i in e)e.hasOwnProperty(i)&&h.push(i+":"+e[i]+";");j.push('style="'+h.join("")+'"')}for(i in d)d.hasOwnProperty(i)&&j.push(i+'="'+d[i]+'"');j=j.join(" ")+">";var k=b(this,"childBuffers");return k.forEach(function(a){var b=typeof a=="string";g=g+(b?a:a.string())}),j+g+"</"+f+">"}})}({}),function(a){var b=SC.get,c=SC.set,d=SC.String.fmt;SC.EventDispatcher=SC.Object.extend({rootElement:document,setup:function(a){var c,d={touchstart:"touchStart",touchmove:"touchMove",touchend:"touchEnd",touchcancel:"touchCancel",keydown:"keyDown",keyup:"keyUp",keypress:"keyPress",mousedown:"mouseDown",mouseup:"mouseUp",click:"click",dblclick:"doubleClick",mousemove:"mouseMove",focusin:"focusIn",focusout:"focusOut",mouseenter:"mouseEnter",mouseleave:"mouseLeave",submit:"submit",change:"change"};jQuery.extend(d,a||{});var e=SC.$(b(this,"rootElement"));e.addClass("sc-application");for(c in d)d.hasOwnProperty(c)&&this.setupHandler(e,c,d[c])},setupHandler:function(a,b,c){var d=this;a.delegate(".sc-view",b+".sproutcore",function(a,b){var e=SC.View.views[this.id],f=!0,g=null;return g=d._findNearestEventManager(e,c),g&&g!==b?f=d._dispatchEvent(g,a,c,e):e?f=d._bubbleEvent(e,a,c):a.stopPropagation(),f})},_findNearestEventManager:function(a,c){var d=null;while(a){d=b(a,"eventManager");if(d&&d[c])break;a=b(a,"parentView")}return d},_dispatchEvent:function(a,b,c,d){var e=!0;return handler=a[c],SC.typeOf(handler)==="function"?(e=handler.call(a,b,d),b.stopPropagation()):e=this._bubbleEvent(d,b,c),e},_bubbleEvent:function(a,b,c){var d=!0,e,f=this;return SC.run(function(){e=a[c],SC.typeOf(e)==="function"&&(d=e.call(a,b))}),d},destroy:function(){var a=b(this,"rootElement");return SC.$(a).undelegate(".sproutcore").removeClass("sc-application"),this._super()}})}({}),function(a){var b=SC.get,c=SC.set;SC.Application=SC.Namespace.extend({rootElement:document,eventDispatcher:null,customEvents:null,init:function(){var a,d=b(this,"rootElement");a=SC.EventDispatcher.create({rootElement:d}),c(this,"eventDispatcher",a);var e=this;SC.$(document).ready(function(){e.ready()})},ready:function(){var a=b(this,"eventDispatcher"),c=b(this,"customEvents");a.setup(c)},destroy:function(){return b(this,"eventDispatcher").destroy(),this._super()}})}({}),function(a){var b=SC.run.queues;b.insertAt(b.indexOf("actions")+1,"render")}({}),function(a){}({}),function(a){var b=SC.get,c=SC.set,d=SC.addObserver,e=SC.getPath,f=SC.meta,g=SC.String.fmt;SC.TEMPLATES={},SC.View=SC.Object.extend({concatenatedProperties:["classNames","classNameBindings","attributeBindings"],isView:YES,templateName:null,templates:SC.TEMPLATES,template:function(a,c){if(c!==undefined)return c;var d=b(this,"templateName"),e;d&&(e=b(b(this,"templates"),d));if(!e&&d){"undefined"!==require&&require.exists&&require.exists(d)&&(e=require(d));if(!e)throw new SC.Error('%@ - Unable to find template "%@".'.fmt(this,d))}return e||b(this,"defaultTemplate")}.property("templateName").cacheable(),templateContext:function(a,b){return b!==undefined?b:this}.property().cacheable(),parentView:null,isVisible:!0,childViews:[],nearestInstanceOf:function(a){var b=this.parentView;while(b){if(b instanceof a)return b;b=b.parentView}},nearestWithProperty:function(a){var b=this.parentView;while(b){if(a in b.parentView)return b;b=b.parentView}},nearestChildOf:function(a){var b=this.parentView;while(b){if(b.parentView instanceof a)return b;b=b.parentView}},collectionView:function(){return this.nearestInstanceOf(SC.CollectionView)}.property().cacheable(),itemView:function(){return this.nearestChildOf(SC.CollectionView)}.property().cacheable(),contentView:function(){return this.nearestWithProperty("content")}.property().cacheable(),_parentViewDidChange:function(){this.invokeRecursively(function(a){a.propertyDidChange("collectionView"),a.propertyDidChange("itemView"),a.propertyDidChange("contentView")})}.observes("parentView"),render:function(a){var c=b(this,"template");if(c){var d=b(this,"templateContext"),e={view:this,buffer:a,isRenderData:!0},f=c(d,{data:e});f!==undefined&&a.push(f)}},invokeForState:function(a){var c=this,d=c.states;while(d){var e=b(this,"state"),f=d[e];if(f){var g=f[a]||d["default"][a];if(g){var h=Array.prototype.slice.call(arguments,1);return h.unshift(this),g.apply(this,h)}}d=d.parent}},rerender:function(){return this.invokeForState("rerender")},clearRenderedChildren:function(){var a=f(this)["SC.View"],c=a.lengthBeforeRender,d=a.lengthAfterRender,e=b(this,"childViews");for(var g=c;g<d;g++)e[g]&&e[g].destroy()},_applyClassNameBindings:function(){var a=b(this,"classNameBindings"),c=b(this,"classNames"),e,f,g;!a||a.forEach(function(a){var b,h=function(){f=this._classStringForProperty(a),e=this.$(),b&&e.removeClass(b),f?(e.addClass(f),b=f):b=null};d(this,a,h),g=this._classStringForProperty(a),g&&(c.push(g),b=g)},this)},_applyAttributeBindings:function(a){var c=b(this,"attributeBindings"),e,f,g;!c||c.forEach(function(c){var h=function(){f=this.$();var a=f.attr(c);e=b(this,c),g=typeof e,g!=="string"&&g!=="number"||e===a?e&&g==="boolean"?f.attr(c,c):e===NO&&f.removeAttr(c):f.attr(c,e)};d(this,c,h),e=b(this,c),g=typeof e,g==="string"||g==="number"?a.attr(c,e):e&&g==="boolean"&&a.attr(c,c)},this)},_classStringForProperty:function(a){var c=a.split(":"),d=c[1];a=c[0];var e=SC.getPath(this,a);return e===YES?d?d:SC.String.dasherize(b(a.split("."),"lastObject")):e!==NO&&e!==undefined&&e!==null?e:null},element:function(a,b){return b!==undefined?this.invokeForState("setElement",b):this.invokeForState("getElement")}.property("parentView","state").cacheable(),$:function(a){return this.invokeForState("$",a)},mutateChildViews:function(a){var c=b(this,"childViews"),d=b(c,"length"),e;while(--d>=0)e=c[d],a.call(this,e,d);return this},forEachChildView:function(a){var c=b(this,"childViews"),d=b(c,"length"),e,f;for(f=0;f<d;f++)e=c[f],a.call(this,e);return this},appendTo:function(a){return this._insertElementLater(function(){this.$().appendTo(a)}),this},_insertElementLater:function(a){SC.run.schedule("render",this,"invokeForState","insertElement",a)},append:function(){return this.appendTo(document.body)},remove:function(){this.destroyElement()},elementId:function(a,b){return b!==undefined?b:SC.guidFor(this)}.property().cacheable(),findElementInParentElement:function(a){var c="#"+b(this,"elementId");return jQuery(c)[0]||jQuery(c,a)[0]},renderBuffer:function(a){return SC.RenderBuffer(a||b(this,"tagName")||"div")},createElement:function(){if(b(this,"element"))return this;var a=this.renderToBuffer();return c(this,"element",a.element()),this},willInsertElement:SC.K,didInsertElement:SC.K,invokeRecursively:function(a){a.call(this,this),this.forEachChildView(function(b){b.invokeRecursively(a)})},invalidateRecursively:function(a){this.forEachChildView(function(b){b.propertyDidChange(a)})},_notifyWillInsertElement:function(){this.invokeRecursively(function(a){a.willInsertElement()})},_notifyDidInsertElement:function(){this.invokeRecursively(function(a){a.didInsertElement()})},destroyElement:function(){return this.invokeForState("destroyElement")},willDestroyElement:function(){},_notifyWillDestroyElement:function(){this.invokeRecursively(function(a){a.willDestroyElement()})},_elementWillChange:function(){this.forEachChildView(function(a){SC.propertyWillChange(a,"element")})}.observesBefore("element"),_elementDidChange:function(){this.forEachChildView(function(a){SC.propertyDidChange(a,"element")})}.observes("element"),parentViewDidChange:SC.K,renderToBuffer:function(a,c){var d=f(this)["SC.View"],g;return SC.run.sync(),c=c||"begin",a?g=a[c](b(this,"tagName")||"div"):g=this.renderBuffer(),d.buffer=g,this.transitionTo("inBuffer"),d.lengthBeforeRender=e(this,"childViews.length"),this.applyAttributesToBuffer(g),this.render(g),d.lengthAfterRender=e(this,"childViews.length"),g},applyAttributesToBuffer:function(a){this._applyClassNameBindings(),this._applyAttributeBindings(a),a.addClass(b(this,"classNames").join(" ")),a.id(b(this,"elementId"));var c=b(this,"ariaRole");c&&a.attr("role",c),b(this,"isVisible")||a.style("display","none")},tagName:null,ariaRole:null,classNames:["sc-view"],classNameBindings:[],attributeBindings:[],init:function(){c(this,"state","preRender");var a=b(this,"parentView");this._super(),SC.View.views[b(this,"elementId")]=this;var d=b(this,"childViews").slice();c(this,"childViews",d),this.mutateChildViews(function(a,b){var c;"string"==typeof a?(c=this[a],c=this.createChildView(c),d[b]=this[a]=c):a.isClass&&(c=this.createChildView(a),d[b]=c)}),this.classNameBindings=b(this,"classNameBindings").slice(),this.classNames=b(this,"classNames").slice(),f(this)["SC.View"]={}},appendChild:function(a,b){return this.invokeForState("appendChild",a,b)},removeChild:function(a){c(a,"parentView",null);var d=b(this,"childViews");return d.removeObject(a),this},removeAllChildren:function(){return this.mutateChildViews(function(a){this.removeChild(a)})},destroyAllChildren:function(){return this.mutateChildViews(function(a){a.destroy()})},removeFromParent:function(){var a=b(this,"parentView");return this.remove(),a&&a.removeChild(this),this},destroy:function(){if(!b(this,"isDestroyed")){var a=f(this)["SC.View"],c=b(this,"childViews"),d=b(this,"parentView"),e=b(this,"elementId"),g=c.length;this.destroyElement(),d&&d.removeChild(this),SC.Descriptor.setup(this,"state","destroyed"),this._super();for(var h=g-1;h>=0;h--)c[h].destroy();return delete SC.View.views[b(this,"elementId")],this}},createChildView:function(a,b){return SC.View.detect(a)?a=a.create(b||{},{parentView:this}):c(a,"parentView",this),a},_isVisibleDidChange:function(){this.$().toggle(b(this,"isVisible"))}.observes("isVisible"),clearBuffer
:function(){this.invokeRecursively(function(a){f(a)["SC.View"].buffer=null})},transitionTo:function(a,b){c(this,"state",a),b!==!1&&this.forEachChildView(function(b){b.transitionTo(a)})}}),SC.View.reopen({states:SC.View.states}),SC.View.views={}}({}),function(a){var b=SC.get,c=SC.set;SC.View.states={"default":{appendChild:function(){throw"You can't use appendChild outside of the rendering process"},$:function(){return SC.$()},getElement:function(){return null},setElement:function(a){if(a)view.clearBuffer(),view.transitionTo("inDOM");else throw"You can't set an element to null when the view has not yet been inserted into the DOM";return a}}},SC.View.reopen({states:SC.View.states})}({}),function(a){SC.View.states.preRender={insertElement:function(a,b){a.createElement(),a._notifyWillInsertElement(),b.call(a),a._notifyDidInsertElement()},setElement:function(a,b){return a.beginPropertyChanges(),a.invalidateRecursively("element"),b!==null&&a.transitionTo("inDOM"),a.endPropertyChanges(),b}}}({}),function(a){var b=SC.get,c=SC.set,d=SC.meta;SC.View.states.inBuffer={$:function(a,b){return a.rerender(),SC.$()},rerender:function(a){var b=d(a)["SC.View"].buffer;a.clearRenderedChildren(),a.renderToBuffer(b,"replaceWith")},appendChild:function(a,b,c){var e=d(a)["SC.View"].buffer;return b=this.createChildView(b,c),a.childViews.pushObject(b),b.renderToBuffer(e),b},destroyElement:function(a){return a.clearBuffer(),a._notifyWillDestroyElement(),a.transitionTo("preRender"),a},insertElement:function(){throw"You can't insert an element that has already been rendered"},setElement:function(a,b){return a.invalidateRecursively("element"),b===null?a.transitionTo("preRender"):(a.clearBuffer(),a.transitionTo("inDOM")),b}}}({}),function(a){var b=SC.get,c=SC.set,d=SC.meta;SC.View.states.inDOM={$:function(a,c){var d=b(a,"element");return c?SC.$(c,d):SC.$(d)},getElement:function(a){var c=b(a,"parentView");c&&(c=b(c,"element"));if(c)return ret=a.findElementInParentElement(c)},setElement:function(a,b){if(b===null)a.invalidateRecursively("element"),a.transitionTo("preRender");else throw"You cannot set an element to a non-null value when the element is already in the DOM.";return b},rerender:function(a){var d=b(a,"element");a.clearRenderedChildren(),c(a,"element",null),a._insertElementLater(function(){SC.$(d).replaceWith(b(a,"element"))})},destroyElement:function(a){var d=b(this,"element");return a.invokeRecursively(function(a){this.willDestroyElement()}),c(a,"element",null),SC.$(d).remove(),a},insertElement:function(){throw"You can't insert an element into the DOM that has already been inserted"}}}({}),function(a){var b="You can't call %@ on a destroyed view",c=SC.String.fmt;SC.View.states.destroyed={appendChild:function(){throw c(b,["appendChild"])},rerender:function(){throw c(b,["rerender"])},destroyElement:function(){throw c(b,["destroyElement"])},setElement:function(){throw c(b,["set('element', ...)"])},insertElement:SC.K}}({}),function(a){}({}),function(a){var b=SC.get,c=SC.set,d=SC.meta;SC.ContainerView=SC.View.extend({renderToBuffer:function(){var a=this._super.apply(this,arguments);return b(this,"childViews").addArrayObserver(this,{willChange:"childViewsWillChange",didChange:"childViewsDidChange"}),a},render:function(a){this.forEachChildView(function(b){b.renderToBuffer(a)})},destroy:function(){b(this,"childViews").removeArrayObserver(this,{willChange:"childViewsWillChange",didChange:"childViewsDidChange"}),this._super()},childViewsWillChange:function(a,b,c){this.invokeForState("childViewsWillChange",a,b,c)},childViewsDidChange:function(a,c,d,e){var f=b(a,"length");e!==0&&this.invokeForState("childViewsDidChange",a,c,e)},_scheduleInsertion:function(a,b){var c=this;a._insertElementLater(function(){b?b.$().after(a.$()):c.$().prepend(a.$())})}}),SC.ContainerView.states={parent:SC.View.states,"default":{},inBuffer:{childViewsDidChange:function(a,b,c,e){var f=d(a)["SC.View"].buffer,g,h,i,j;c===0?(j=b[c],g=c+1,j.renderToBuffer(f,"prepend")):(j=b[c-1],g=c);for(var k=g;k<c+e;k++)h=j,j=b[k],i=d(h)["SC.View"].buffer,j.renderToBuffer(i,"insertAfter")}},inDOM:{childViewsWillChange:function(a,b,c,d){for(var e=c;e<c+d;e++)b[e].destroyElement()},childViewsDidChange:function(a,b,c,d){prev=c===0?null:b[c-1];for(var e=c;e<c+d;e++)a=b[e],this._scheduleInsertion(a,prev),prev=a}}},SC.ContainerView.reopen({states:SC.ContainerView.states})}({}),function(a){var b=SC.get,c=SC.set,d=SC.String.fmt;SC.CollectionView=SC.ContainerView.extend({content:null,emptyView:null,itemViewClass:SC.View,init:function(){var a=this._super();return this._contentDidChange(),a},_contentWillChange:function(){var a=this.get("content");a&&a.removeArrayObserver(this);var c=a?b(a,"length"):0;this.arrayWillChange(a,0,c)}.observesBefore("content"),_contentDidChange:function(){var a=b(this,"content");a&&a.addArrayObserver(this);var c=a?b(a,"length"):0;this.arrayDidChange(a,0,null,c)}.observes("content"),destroy:function(){var a=b(this,"content");return a&&a.removeArrayObserver(this),this._super(),this},arrayWillChange:function(a,c,d){var e=b(this,"emptyView");e&&e instanceof SC.View&&e.removeFromParent();var f=b(this,"childViews"),g,h,i;i=b(f,"length");for(h=c+d-1;h>=c;h--)f[h].destroy()},arrayDidChange:function(a,d,e,f){var g=b(this,"itemViewClass"),h=b(this,"childViews"),i=[],j,k,l,m,n;m=a?b(a,"length"):0;if(m)for(l=d;l<d+f;l++)k=a.objectAt(l),j=this.createChildView(g,{content:k,contentIndex:l}),i.push(j);else{var o=b(this,"emptyView");if(!o)return;o=this.createChildView(o),i.push(o),c(this,"emptyView",o)}h.replace(d,0,i)},createChildView:function(a,d){var a=this._super(a,d),e=b(a,"tagName"),f=e||SC.CollectionView.CONTAINER_MAP[b(this,"tagName")];return c(a,"tagName",f||null),a}}),SC.CollectionView.CONTAINER_MAP={ul:"li",ol:"li",table:"tr",thead:"tr",tbody:"tr",tfoot:"tr",tr:"td",select:"option"}}({}),function(a){}({}),function(a){SC.$=jQuery}({}),function(a){SC.Handlebars={},SC.Handlebars.Compiler=function(){},SC.Handlebars.Compiler.prototype=SC.create(Handlebars.Compiler.prototype),SC.Handlebars.Compiler.prototype.compiler=SC.Handlebars.Compiler,SC.Handlebars.JavaScriptCompiler=function(){},SC.Handlebars.JavaScriptCompiler.prototype=SC.create(Handlebars.JavaScriptCompiler.prototype),SC.Handlebars.JavaScriptCompiler.prototype.compiler=SC.Handlebars.JavaScriptCompiler,SC.Handlebars.JavaScriptCompiler.prototype.nameLookup=function(a,b,c){return c==="context"?"SC.get("+a+", "+this.quotedString(b)+");":Handlebars.JavaScriptCompiler.prototype.nameLookup.call(this,a,b,c)},SC.Handlebars.JavaScriptCompiler.prototype.initializeBuffer=function(){return"''"},SC.Handlebars.JavaScriptCompiler.prototype.appendToBuffer=function(a){return"data.buffer.push("+a+");"},SC.Handlebars.Compiler.prototype.mustache=function(a){if(a.params.length||a.hash)return Handlebars.Compiler.prototype.mustache.call(this,a);var b=new Handlebars.AST.IdNode(["bind"]);return a.escaped&&(a.hash=a.hash||new Handlebars.AST.HashNode([]),a.hash.pairs.push(["escaped",new Handlebars.AST.StringNode("true")])),a=new Handlebars.AST.MustacheNode([b].concat([a.id]),a.hash,!a.escaped),Handlebars.Compiler.prototype.mustache.call(this,a)},SC.Handlebars.compile=function(a){var b=Handlebars.parse(a),c={data:!0,stringParams:!0},d=(new SC.Handlebars.Compiler).compile(b,c),e=(new SC.Handlebars.JavaScriptCompiler).compile(d,c,undefined,!0);return Handlebars.template(e)},Handlebars.registerHelper("helperMissing",function(a,b){var c,d="";throw c="%@ Handlebars error: Could not find property '%@' on object %@.",b.data&&(d=b.data.view),new SC.Error(SC.String.fmt(c,[d,a,this]))})}({}),function(a){var b=SC.set,c=SC.get;SC.Checkbox=SC.View.extend({title:null,value:!1,classNames:["sc-checkbox"],defaultTemplate:SC.Handlebars.compile('<label><input type="checkbox" {{bindAttr checked="value"}}>{{title}}</label>'),change:function(){SC.run.once(this,this._updateElementValue)},_updateElementValue:function(){var a=this.$("input:checkbox");b(this,"value",a.prop("checked"))}})}({}),function(a){var b=SC.get,c=SC.set;SC.TextField=SC.View.extend({classNames:["sc-text-field"],insertNewline:SC.K,cancel:SC.K,tagName:"input",attributeBindings:["type","placeholder","value"],type:"text",value:"",placeholder:null,focusOut:function(a){return this._elementValueDidChange(),!1},change:function(a){return this._elementValueDidChange(),!1},keyUp:function(a){return this.interpretKeyEvents(a),!1},interpretKeyEvents:function(a){var b=SC.TextField.KEY_EVENTS,c=b[a.keyCode];if(c)return this[c](a);this._elementValueDidChange()},_elementValueDidChange:function(){c(this,"value",this.$().val())},_updateElementValue:function(){this.$().val(b(this,"value"))}}),SC.TextField.KEY_EVENTS={13:"insertNewline",27:"cancel"}}({}),function(a){var b=SC.get,c=SC.set;SC.Button=SC.View.extend({classNames:["sc-button"],classNameBindings:["isActive"],tagName:"button",attributeBindings:["type"],type:"button",targetObject:function(){var a=b(this,"target");return SC.typeOf(a)==="string"?SC.getPath(this,a):a}.property("target").cacheable(),mouseDown:function(){c(this,"isActive",!0),this._mouseDown=!0,this._mouseEntered=!0},mouseLeave:function(){this._mouseDown&&(c(this,"isActive",!1),this._mouseEntered=!1)},mouseEnter:function(){this._mouseDown&&(c(this,"isActive",!0),this._mouseEntered=!0)},mouseUp:function(a){if(b(this,"isActive")){var d=b(this,"action"),e=b(this,"targetObject");e&&d&&(typeof d=="string"&&(d=e[d]),d.call(e,this)),c(this,"isActive",!1)}this._mouseDown=!1,this._mouseEntered=!1},touchStart:function(a){this.mouseDown(a)},touchEnd:function(a){this.mouseUp(a)}})}({}),function(a){var b=SC.get,c=SC.set;SC.TextArea=SC.View.extend({classNames:["sc-text-area"],tagName:"textarea",value:"",attributeBindings:["placeholder"],placeholder:null,insertNewline:SC.K,cancel:SC.K,focusOut:function(a){return this._elementValueDidChange(),!1},change:function(a){return this._elementValueDidChange(),!1},keyUp:function(a){return this.interpretKeyEvents(a),!1},willInsertElement:function(){this._updateElementValue()},interpretKeyEvents:function(a){var b=SC.TextArea.KEY_EVENTS,c=b[a.keyCode];this._elementValueDidChange();if(c)return this[c](a)},_elementValueDidChange:function(){c(this,"value",this.$().val()||null)},_updateElementValue:function(){this.$().val(b(this,"value"))}.observes("value")}),SC.TextArea.KEY_EVENTS={13:"insertNewline",27:"cancel"}}({}),function(a){}({}),function(a){var b=SC.get,c=SC.set,d=SC.getPath;SC._BindableSpanView=SC.View.extend({tagName:"span",shouldDisplayFunc:null,preserveContext:!1,displayTemplate:null,inverseTemplate:null,property:null,render:function(a){var e=b(this,"isEscaped"),f=b(this,"shouldDisplayFunc"),g=b(this,"property"),h=b(this,"preserveContext"),i=b(this,"previousContext"),j=b(this,"inverseTemplate"),k=b(this,"displayTemplate"),l=d(i,g);if(f(l)){c(this,"template",k);if(h)c(this,"templateContext",i);else if(k)c(this,"templateContext",l);else{l==null?l="":l=String(l),e&&(l=Handlebars.Utils.escapeExpression(l)),a.push(l);return}}else j?(c(this,"template",j),h?c(this,"templateContext",i):c(this,"templateContext",l)):c(this,"template",function(){return""});return this._super(a)}})}({}),function(a){var b=SC.get,c=SC.getPath,d=SC.String.fmt;(function(){var a=function(a,d,e,f){var g=d.data,h=d.fn,i=d.inverse,j=g.view,k=this;if("object"==typeof this){var l=j.createChildView(SC._BindableSpanView,{preserveContext:e,shouldDisplayFunc:f,displayTemplate:h,inverseTemplate:i,property:a,previousContext:k,isEscaped:d.hash.escaped,tagName:d.hash.tagName||"span"}),m,n;j.appendChild(l),m=function(){b(l,"element")?l.rerender():SC.removeObserver(k,a,n)},n=function(){SC.run.once(m)},SC.addObserver(k,a,n)}else g.buffer.push(c(this,a))};Handlebars.registerHelper("bind",function(b,c){return a.call(this,b,c,!1,function(a){return!SC.none(a)})}),Handlebars.registerHelper("boundIf",function(c,d){return a.call(this,c,d,!0,function(a){return SC.typeOf(a)==="array"?b(a,"length")!==0:!!a})})})(),Handlebars.registerHelper("with",function(a,b){return Handlebars.helpers.bind.call(b.contexts[0],a,b)}),Handlebars.registerHelper("if",function(a,b){return Handlebars.helpers.boundIf.call(b.contexts[0],a,b)}),Handlebars.registerHelper("unless",function(a,b){var c=b.fn,d=b.inverse;return b.fn=d,b.inverse=c,Handlebars.helpers.boundIf.call(b.contexts[0],a,b)}),Handlebars.registerHelper("bindAttr",function(a){var b=a.hash,d=a.data.view,e=[],f=this,g=jQuery.uuid++,h=b["class"];if(h!==null&&h!==undefined){var i=SC.Handlebars.bindClasses(this,h,d,g);e.push('class="'+i.join(" ")+'"'),delete b["class"]}var j=SC.keys(b);return j.forEach(function(a){var h=b[a],i=c(f,h),j,k;j=function(){var b=c(f,h),e=d.$("[data-handlebars-id='"+g+"']");if(e.length===0)SC.removeObserver(f,h,k);else{var i=e.attr(a);b===!1&&i?e.removeAttr(a):b===!0&&i!==a?e.attr(a,a):i!==b&&e.attr(a,b)}},k=function(){SC.run.once(j)},SC.addObserver(f,h,k),i===!0&&(i=a),i!==!1&&e.push(a+'="'+i+'"')},this),e.push('data-handlebars-id="'+g+'"'),new Handlebars.SafeString(e.join(" "))}),SC.Handlebars.bindClasses=function(a,d,e,f){var g=[],h,i,j,k=function(d){var e=c(a,d);return e===YES?SC.String.dasherize(b(d.split("."),"lastObject")):e!==NO&&e!==undefined&&e!==null?e:null};return d.split(" ").forEach(function(b){var c,d,l;d=function(){h=k(b),j=f?e.$("[data-handlebars-id='"+f+"']"):e.$(),j.length===0?SC.removeObserver(a,b,l):(c&&j.removeClass(c),h?(j.addClass(h),c=h):c=null)},l=function(){SC.run.once(d)},SC.addObserver(a,b,l),i=k(b),i&&(g.push(i),c=i)}),g}}({}),function(a){var b=SC.get,c=SC.set,d=/^parentView\./;SC.Handlebars.ViewHelper=SC.Object.create({viewClassFromHTMLOptions:function(a,b,c){var e={},f=b["class"],g=!1;b.id&&(e.elementId=b.id,g=!0),f&&(f=f.split(" "),e.classNames=f,g=!0),b.classBinding&&(e.classNameBindings=b.classBinding.split(" "),g=!0),g&&(b=jQuery.extend({},b),delete b.id,delete b["class"],delete b.classBinding);var h;for(var i in b){if(!b.hasOwnProperty(i))continue;SC.IS_BINDING.test(i)&&(h=b[i],SC.isGlobalPath(h)||(d.test(h)?SC.Logger.warn("As of SproutCore 2.0 beta 3, it is no longer necessary to bind to parentViews. Instead, please provide binding paths relative to the current Handlebars context."):b[i]="bindingContext."+h))}return e.bindingContext=c,a.extend(b,e)},helper:function(a,b,c){var d=c.inverse,e=c.data,f=e.view,g=c.fn,h=c.hash,i;"string"==typeof b?i=SC.getPath(a,b):i=b,i=this.viewClassFromHTMLOptions(i,h,a);var j=e.view,k={};g&&(k.template=g),j.appendChild(i,k)}}),Handlebars.registerHelper("view",function(a,b){return a&&a.data&&a.data.isRenderData&&(b=a,a="SC.View"),SC.Handlebars.ViewHelper.helper(this,a,b)})}({}),function(a){var b=SC.get;Handlebars.registerHelper("collection",function(a,c){a&&a.data&&a.data.isRenderData&&(c=a,a=undefined);var d=c.fn,e=c.data,f=c.inverse,g;g=a?SC.getPath(this,a):SC.CollectionView;var h=c.hash,i={},j,k,l=h.itemViewClass,m=b(g,"proto");delete h.itemViewClass,k=l?SC.getPath(m,l):m.itemViewClass;for(var n in h)h.hasOwnProperty(n)&&(j=n.match(/^item(.)(.*)$/),j&&(i[j[1].toLowerCase()+j[2]]=h[n],delete h[n]));var o=h.tagName||b(g,"proto").tagName;return d&&(i.template=d,delete c.fn),f&&f!==Handlebars.VM.noop&&(h.emptyView=SC.View.extend({template:f,tagName:i.tagName})),h.preserveContext&&(i.templateContext=function(){return b(this,"content")}.property("content"),delete h.preserveContext),h.itemViewClass=SC.Handlebars.ViewHelper.viewClassFromHTMLOptions(k,i),Handlebars.helpers.view.call(this,g,c)}),Handlebars.registerHelper("each",function(a,b){return b.hash.contentBinding=SC.Binding.from("parentView."+a).oneWay(),b.hash.preserveContext=!0,Handlebars.helpers.collection.call(this,null,b)})}({}),function(a){var b=SC.getPath;Handlebars.registerHelper("unbound",function(a){return b(this,a)})}({}),function(a){var b=SC.getPath;Handlebars.registerHelper("log",function(a){console.log(b(this,a))}),Handlebars.registerHelper("debugger",function(){debugger})}({}),function(a){}({}),function(a){SC.$(document).ready(function(){SC.$('script[type="text/html"], script[type="text/x-handlebars"]').each(function(){var a=SC.$(this),b=a.attr("data-template-name")||a.attr("id"),c=SC.Handlebars.compile(a.html()),d,e;if(b)SC.TEMPLATES[b]=c,a.remove();else{if(a.parents("head").length!==0)throw new SC.Error("Template found in <head> without a name specified. Please provide a data-template-name attribute.\n"+a.html());e=a.attr("data-view"),d=e?SC.getPath(e):SC.View,d=d.create({template:c}),d._insertElementLater(function(){a.replaceWith(this.$()),a=null})}})})}({}),function(a){}({}),function(a){}({})